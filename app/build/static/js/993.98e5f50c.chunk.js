"use strict";(self.webpackChunkklobox=self.webpackChunkklobox||[]).push([[993],{993:(e,t,s)=>{s.r(t),s.d(t,{default:()=>z});var i=s(390),a=s(818),o=s(487);const n={type:"change"},r={type:"start"},h={type:"end"};class c extends a.pBf{constructor(e,t){super(),void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new a.Pa4,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!1,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:a.RsA.ROTATE,MIDDLE:a.RsA.DOLLY,RIGHT:a.RsA.PAN},this.touches={ONE:a.QmN.ROTATE,TWO:a.QmN.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return l.phi},this.getAzimuthalAngle=function(){return l.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",Z),this._domElementKeyEvents=e},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(n),s.update(),o=i.NONE},this.update=function(){const t=new a.Pa4,r=(new a._fP).setFromUnitVectors(e.up,new a.Pa4(0,1,0)),h=r.clone().invert(),b=new a.Pa4,x=new a._fP,g=2*Math.PI;return function(){const e=s.object.position;t.copy(e).sub(s.target),t.applyQuaternion(r),l.setFromVector3(t),s.autoRotate&&o===i.NONE&&q(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(l.theta+=d.theta*s.dampingFactor,l.phi+=d.phi*s.dampingFactor):(l.theta+=d.theta,l.phi+=d.phi);let a=s.minAzimuthAngle,f=s.maxAzimuthAngle;return isFinite(a)&&isFinite(f)&&(a<-Math.PI?a+=g:a>Math.PI&&(a-=g),f<-Math.PI?f+=g:f>Math.PI&&(f-=g),l.theta=a<=f?Math.max(a,Math.min(f,l.theta)):l.theta>(a+f)/2?Math.max(a,l.theta):Math.min(f,l.theta)),l.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,l.phi)),l.makeSafe(),l.radius*=u,l.radius=Math.max(s.minDistance,Math.min(s.maxDistance,l.radius)),!0===s.enableDamping?s.target.addScaledVector(p,s.dampingFactor):s.target.add(p),t.setFromSpherical(l),t.applyQuaternion(h),e.copy(s.target).add(t),s.object.lookAt(s.target),!0===s.enableDamping?(d.theta*=1-s.dampingFactor,d.phi*=1-s.dampingFactor,p.multiplyScalar(1-s.dampingFactor)):(d.set(0,0,0),p.set(0,0,0)),u=1,!!(m||b.distanceToSquared(s.object.position)>c||8*(1-x.dot(s.object.quaternion))>c)&&(s.dispatchEvent(n),b.copy(s.object.position),x.copy(s.object.quaternion),m=!1,!0)}}(),this.dispose=function(){s.domElement.removeEventListener("contextmenu",X),s.domElement.removeEventListener("pointerdown",G),s.domElement.removeEventListener("pointercancel",Y),s.domElement.removeEventListener("wheel",B),s.domElement.removeEventListener("pointermove",U),s.domElement.removeEventListener("pointerup",V),null!==s._domElementKeyEvents&&s._domElementKeyEvents.removeEventListener("keydown",Z)};const s=this,i={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=i.NONE;const c=1e-6,l=new a.$V,d=new a.$V;let u=1;const p=new a.Pa4;let m=!1;const b=new a.FM8,x=new a.FM8,g=new a.FM8,f=new a.FM8,w=new a.FM8,v=new a.FM8,C=new a.FM8,y=new a.FM8,P=new a.FM8,M=[],S={};function E(){return Math.pow(.95,s.zoomSpeed)}function q(e){d.theta-=e}function T(e){d.phi-=e}const D=function(){const e=new a.Pa4;return function(t,s){e.setFromMatrixColumn(s,0),e.multiplyScalar(-t),p.add(e)}}(),k=function(){const e=new a.Pa4;return function(t,i){!0===s.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),p.add(e)}}(),N=function(){const e=new a.Pa4;return function(t,i){const a=s.domElement;if(s.object.isPerspectiveCamera){const o=s.object.position;e.copy(o).sub(s.target);let n=e.length();n*=Math.tan(s.object.fov/2*Math.PI/180),D(2*t*n/a.clientHeight,s.object.matrix),k(2*i*n/a.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(D(t*(s.object.right-s.object.left)/s.object.zoom/a.clientWidth,s.object.matrix),k(i*(s.object.top-s.object.bottom)/s.object.zoom/a.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function L(e){s.object.isPerspectiveCamera?u/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function O(e){s.object.isPerspectiveCamera?u*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),m=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function H(e){b.set(e.clientX,e.clientY)}function A(e){f.set(e.clientX,e.clientY)}function R(){if(1===M.length)b.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);b.set(e,t)}}function _(){if(1===M.length)f.set(M[0].pageX,M[0].pageY);else{const e=.5*(M[0].pageX+M[1].pageX),t=.5*(M[0].pageY+M[1].pageY);f.set(e,t)}}function j(){const e=M[0].pageX-M[1].pageX,t=M[0].pageY-M[1].pageY,s=Math.sqrt(e*e+t*t);C.set(0,s)}function F(e){if(1==M.length)x.set(e.pageX,e.pageY);else{const t=J(e),s=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);x.set(s,i)}g.subVectors(x,b).multiplyScalar(s.rotateSpeed);const t=s.domElement;q(2*Math.PI*g.x/t.clientHeight),T(2*Math.PI*g.y/t.clientHeight),b.copy(x)}function z(e){if(1===M.length)w.set(e.pageX,e.pageY);else{const t=J(e),s=.5*(e.pageX+t.x),i=.5*(e.pageY+t.y);w.set(s,i)}v.subVectors(w,f).multiplyScalar(s.panSpeed),N(v.x,v.y),f.copy(w)}function I(e){const t=J(e),i=e.pageX-t.x,a=e.pageY-t.y,o=Math.sqrt(i*i+a*a);y.set(0,o),P.set(0,Math.pow(y.y/C.y,s.zoomSpeed)),L(P.y),C.copy(y)}function G(e){!1!==s.enabled&&(0===M.length&&(s.domElement.setPointerCapture(e.pointerId),s.domElement.addEventListener("pointermove",U),s.domElement.addEventListener("pointerup",V)),function(e){M.push(e)}(e),"touch"===e.pointerType?function(e){switch(K(e),M.length){case 1:switch(s.touches.ONE){case a.QmN.ROTATE:if(!1===s.enableRotate)return;R(),o=i.TOUCH_ROTATE;break;case a.QmN.PAN:if(!1===s.enablePan)return;_(),o=i.TOUCH_PAN;break;default:o=i.NONE}break;case 2:switch(s.touches.TWO){case a.QmN.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;s.enableZoom&&j(),s.enablePan&&_(),o=i.TOUCH_DOLLY_PAN;break;case a.QmN.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;s.enableZoom&&j(),s.enableRotate&&R(),o=i.TOUCH_DOLLY_ROTATE;break;default:o=i.NONE}break;default:o=i.NONE}o!==i.NONE&&s.dispatchEvent(r)}(e):function(e){let t;switch(e.button){case 0:t=s.mouseButtons.LEFT;break;case 1:t=s.mouseButtons.MIDDLE;break;case 2:t=s.mouseButtons.RIGHT;break;default:t=-1}switch(t){case a.RsA.DOLLY:if(!1===s.enableZoom)return;!function(e){C.set(e.clientX,e.clientY)}(e),o=i.DOLLY;break;case a.RsA.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;A(e),o=i.PAN}else{if(!1===s.enableRotate)return;H(e),o=i.ROTATE}break;case a.RsA.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;H(e),o=i.ROTATE}else{if(!1===s.enablePan)return;A(e),o=i.PAN}break;default:o=i.NONE}o!==i.NONE&&s.dispatchEvent(r)}(e))}function U(e){!1!==s.enabled&&("touch"===e.pointerType?function(e){switch(K(e),o){case i.TOUCH_ROTATE:if(!1===s.enableRotate)return;F(e),s.update();break;case i.TOUCH_PAN:if(!1===s.enablePan)return;z(e),s.update();break;case i.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&I(e),s.enablePan&&z(e)}(e),s.update();break;case i.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&I(e),s.enableRotate&&F(e)}(e),s.update();break;default:o=i.NONE}}(e):function(e){if(!1===s.enabled)return;switch(o){case i.ROTATE:if(!1===s.enableRotate)return;!function(e){x.set(e.clientX,e.clientY),g.subVectors(x,b).multiplyScalar(s.rotateSpeed);const t=s.domElement;q(2*Math.PI*g.x/t.clientHeight),T(2*Math.PI*g.y/t.clientHeight),b.copy(x),s.update()}(e);break;case i.DOLLY:if(!1===s.enableZoom)return;!function(e){y.set(e.clientX,e.clientY),P.subVectors(y,C),P.y>0?L(E()):P.y<0&&O(E()),C.copy(y),s.update()}(e);break;case i.PAN:if(!1===s.enablePan)return;!function(e){w.set(e.clientX,e.clientY),v.subVectors(w,f).multiplyScalar(s.panSpeed),N(v.x,v.y),f.copy(w),s.update()}(e)}}(e))}function V(e){W(e),0===M.length&&(s.domElement.releasePointerCapture(e.pointerId),s.domElement.removeEventListener("pointermove",U),s.domElement.removeEventListener("pointerup",V)),s.dispatchEvent(h),o=i.NONE}function Y(e){W(e)}function B(e){!1!==s.enabled&&!1!==s.enableZoom&&o===i.NONE&&(e.preventDefault(),s.dispatchEvent(r),function(e){e.deltaY<0?O(E()):e.deltaY>0&&L(E()),s.update()}(e),s.dispatchEvent(h))}function Z(e){!1!==s.enabled&&!1!==s.enablePan&&function(e){let t=!1;switch(e.code){case s.keys.UP:N(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:N(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:N(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:N(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function X(e){!1!==s.enabled&&e.preventDefault()}function W(e){delete S[e.pointerId];for(let t=0;t<M.length;t++)if(M[t].pointerId==e.pointerId)return void M.splice(t,1)}function K(e){let t=S[e.pointerId];void 0===t&&(t=new a.FM8,S[e.pointerId]=t),t.set(e.pageX,e.pageY)}function J(e){const t=e.pointerId===M[0].pointerId?M[1]:M[0];return S[t.pointerId]}s.domElement.addEventListener("contextmenu",X),s.domElement.addEventListener("pointerdown",G),s.domElement.addEventListener("pointercancel",Y),s.domElement.addEventListener("wheel",B,{passive:!1}),this.update()}}s(931);class l{constructor(e,t){this.x=e,this.y=t}}class d{constructor(e,t,s){if(this.q=e,this.r=t,this.s=s,0!==Math.round(e+t+s))throw"q + r + s must be 0"}add(e){return new d(this.q+e.q,this.r+e.r,this.s+e.s)}subtract(e){return new d(this.q-e.q,this.r-e.r,this.s-e.s)}scale(e){return new d(this.q*e,this.r*e,this.s*e)}rotateLeft(){return new d(-this.s,-this.q,-this.r)}rotateRight(){return new d(-this.r,-this.s,-this.q)}static direction(e){return d.directions[e]}neighbor(e){return this.add(d.direction(e))}diagonalNeighbor(e){return this.add(d.diagonals[e])}len(){return(Math.abs(this.q)+Math.abs(this.r)+Math.abs(this.s))/2}distance(e){return this.subtract(e).len()}round(){var e=Math.round(this.q),t=Math.round(this.r),s=Math.round(this.s),i=Math.abs(e-this.q),a=Math.abs(t-this.r),o=Math.abs(s-this.s);return i>a&&i>o?e=-t-s:a>o?t=-e-s:s=-e-t,new d(e,t,s)}lerp(e,t){return new d(this.q*(1-t)+e.q*t,this.r*(1-t)+e.r*t,this.s*(1-t)+e.s*t)}linedraw(e){for(var t=this.distance(e),s=new d(this.q+1e-6,this.r+1e-6,this.s-2e-6),i=new d(e.q+1e-6,e.r+1e-6,e.s-2e-6),a=[],o=1/Math.max(t,1),n=0;n<=t;n++)a.push(s.lerp(i,o*n).round());return a}}d.directions=[new d(1,0,-1),new d(1,-1,0),new d(0,-1,1),new d(-1,0,1),new d(-1,1,0),new d(0,1,-1)],d.diagonals=[new d(2,-1,-1),new d(1,-2,1),new d(-1,-1,2),new d(-2,1,1),new d(-1,2,-1),new d(1,1,-2)];class u{constructor(e,t){this.col=e,this.row=t}static qoffsetFromCube(e,t){var s=t.q,i=t.r+(t.q+e*(1&t.q))/2;if(e!==u.EVEN&&e!==u.ODD)throw"offset must be EVEN (+1) or ODD (-1)";return new u(s,i)}static qoffsetToCube(e,t){var s=t.col,i=t.row-(t.col+e*(1&t.col))/2,a=-s-i;if(e!==u.EVEN&&e!==u.ODD)throw"offset must be EVEN (+1) or ODD (-1)";return new d(s,i,a)}static roffsetFromCube(e,t){var s=t.q+(t.r+e*(1&t.r))/2,i=t.r;if(e!==u.EVEN&&e!==u.ODD)throw"offset must be EVEN (+1) or ODD (-1)";return new u(s,i)}static roffsetToCube(e,t){var s=t.col-(t.row+e*(1&t.row))/2,i=t.row,a=-s-i;if(e!==u.EVEN&&e!==u.ODD)throw"offset must be EVEN (+1) or ODD (-1)";return new d(s,i,a)}}u.EVEN=1,u.ODD=-1;class p{constructor(e,t){this.col=e,this.row=t}static qdoubledFromCube(e){var t=e.q,s=2*e.r+e.q;return new p(t,s)}qdoubledToCube(){var e=this.col,t=(this.row-this.col)/2;return new d(e,t,-e-t)}static rdoubledFromCube(e){var t=2*e.q+e.r,s=e.r;return new p(t,s)}rdoubledToCube(){var e=(this.col-this.row)/2,t=this.row;return new d(e,t,-e-t)}}class m{constructor(e,t,s,i,a,o,n,r,h){this.f0=e,this.f1=t,this.f2=s,this.f3=i,this.b0=a,this.b1=o,this.b2=n,this.b3=r,this.start_angle=h}}class b{constructor(e,t,s){this.orientation=e,this.size=t,this.origin=s}hexToPixel(e){var t=this.orientation,s=this.size,i=this.origin,a=(t.f0*e.q+t.f1*e.r)*s.x,o=(t.f2*e.q+t.f3*e.r)*s.y;return new l(a+i.x,o+i.y)}pixelToHex(e){var t=this.orientation,s=this.size,i=this.origin,a=new l((e.x-i.x)/s.x,(e.y-i.y)/s.y),o=t.b0*a.x+t.b1*a.y,n=t.b2*a.x+t.b3*a.y;return new d(o,n,-o-n)}hexCornerOffset(e){var t=this.orientation,s=this.size,i=2*Math.PI*(t.start_angle-e)/6;return new l(s.x*Math.cos(i),s.y*Math.sin(i))}polygonCorners(e){for(var t=[],s=this.hexToPixel(e),i=0;i<6;i++){var a=this.hexCornerOffset(i);t.push(new l(s.x+a.x,s.y+a.y))}return t}}b.pointy=new m(Math.sqrt(3),Math.sqrt(3)/2,0,1.5,Math.sqrt(3)/3,-1/3,0,2/3,.5),b.flat=new m(1.5,0,Math.sqrt(3)/2,Math.sqrt(3),2/3,0,-1/3,Math.sqrt(3)/3,0);class x{constructor(){}static equalHex(e,t,s){t.q===s.q&&t.s===s.s&&t.r===s.r||g(e)}static equalOffsetcoord(e,t,s){t.col===s.col&&t.row===s.row||g(e)}static equalDoubledcoord(e,t,s){t.col===s.col&&t.row===s.row||g(e)}static equalInt(e,t,s){t!==s&&g(e)}static equalHexArray(e,t,s){x.equalInt(e,t.length,s.length);for(var i=0;i<t.length;i++)x.equalHex(e,t[i],s[i])}static testHexArithmetic(){x.equalHex("hex_add",new d(4,-10,6),new d(1,-3,2).add(new d(3,-7,4))),x.equalHex("hex_subtract",new d(-2,4,-2),new d(1,-3,2).subtract(new d(3,-7,4)))}static testHexDirection(){x.equalHex("hex_direction",new d(0,-1,1),d.direction(2))}static testHexNeighbor(){x.equalHex("hex_neighbor",new d(1,-3,2),new d(1,-2,1).neighbor(2))}static testHexDiagonal(){x.equalHex("hex_diagonal",new d(-1,-1,2),new d(1,-2,1).diagonalNeighbor(3))}static testHexDistance(){x.equalInt("hex_distance",7,new d(3,-7,4).distance(new d(0,0,0)))}static testHexRotateRight(){x.equalHex("hex_rotate_right",new d(1,-3,2).rotateRight(),new d(3,-2,-1))}static testHexRotateLeft(){x.equalHex("hex_rotate_left",new d(1,-3,2).rotateLeft(),new d(-2,-1,3))}static testHexRound(){var e=new d(0,0,0),t=new d(1,-1,0),s=new d(0,-1,1);x.equalHex("hex_round 1",new d(5,-10,5),new d(0,0,0).lerp(new d(10,-20,10),.5).round()),x.equalHex("hex_round 2",e.round(),e.lerp(t,.499).round()),x.equalHex("hex_round 3",t.round(),e.lerp(t,.501).round()),x.equalHex("hex_round 4",e.round(),new d(.4*e.q+.3*t.q+.3*s.q,.4*e.r+.3*t.r+.3*s.r,.4*e.s+.3*t.s+.3*s.s).round()),x.equalHex("hex_round 5",s.round(),new d(.3*e.q+.3*t.q+.4*s.q,.3*e.r+.3*t.r+.4*s.r,.3*e.s+.3*t.s+.4*s.s).round())}static testHexLinedraw(){x.equalHexArray("hex_linedraw",[new d(0,0,0),new d(0,-1,1),new d(0,-2,2),new d(1,-3,2),new d(1,-4,3),new d(1,-5,4)],new d(0,0,0).linedraw(new d(1,-5,4)))}static testLayout(){var e=new d(3,4,-7),t=new b(b.flat,new l(10,15),new l(35,71));x.equalHex("layout",e,t.pixelToHex(t.hexToPixel(e)).round());var s=new b(b.pointy,new l(10,15),new l(35,71));x.equalHex("layout",e,s.pixelToHex(s.hexToPixel(e)).round())}static testOffsetRoundtrip(){var e=new d(3,4,-7),t=new u(1,-3);x.equalHex("conversion_roundtrip even-q",e,u.qoffsetToCube(u.EVEN,u.qoffsetFromCube(u.EVEN,e))),x.equalOffsetcoord("conversion_roundtrip even-q",t,u.qoffsetFromCube(u.EVEN,u.qoffsetToCube(u.EVEN,t))),x.equalHex("conversion_roundtrip odd-q",e,u.qoffsetToCube(u.ODD,u.qoffsetFromCube(u.ODD,e))),x.equalOffsetcoord("conversion_roundtrip odd-q",t,u.qoffsetFromCube(u.ODD,u.qoffsetToCube(u.ODD,t))),x.equalHex("conversion_roundtrip even-r",e,u.roffsetToCube(u.EVEN,u.roffsetFromCube(u.EVEN,e))),x.equalOffsetcoord("conversion_roundtrip even-r",t,u.roffsetFromCube(u.EVEN,u.roffsetToCube(u.EVEN,t))),x.equalHex("conversion_roundtrip odd-r",e,u.roffsetToCube(u.ODD,u.roffsetFromCube(u.ODD,e))),x.equalOffsetcoord("conversion_roundtrip odd-r",t,u.roffsetFromCube(u.ODD,u.roffsetToCube(u.ODD,t)))}static testOffsetFromCube(){x.equalOffsetcoord("offset_from_cube even-q",new u(1,3),u.qoffsetFromCube(u.EVEN,new d(1,2,-3))),x.equalOffsetcoord("offset_from_cube odd-q",new u(1,2),u.qoffsetFromCube(u.ODD,new d(1,2,-3)))}static testOffsetToCube(){x.equalHex("offset_to_cube even-",new d(1,2,-3),u.qoffsetToCube(u.EVEN,new u(1,3))),x.equalHex("offset_to_cube odd-q",new d(1,2,-3),u.qoffsetToCube(u.ODD,new u(1,2)))}static testDoubledRoundtrip(){var e=new d(3,4,-7),t=new p(1,-3);x.equalHex("conversion_roundtrip doubled-q",e,p.qdoubledFromCube(e).qdoubledToCube()),x.equalDoubledcoord("conversion_roundtrip doubled-q",t,p.qdoubledFromCube(t.qdoubledToCube())),x.equalHex("conversion_roundtrip doubled-r",e,p.rdoubledFromCube(e).rdoubledToCube()),x.equalDoubledcoord("conversion_roundtrip doubled-r",t,p.rdoubledFromCube(t.rdoubledToCube()))}static testDoubledFromCube(){x.equalDoubledcoord("doubled_from_cube doubled-q",new p(1,5),p.qdoubledFromCube(new d(1,2,-3))),x.equalDoubledcoord("doubled_from_cube doubled-r",new p(4,2),p.rdoubledFromCube(new d(1,2,-3)))}static testDoubledToCube(){x.equalHex("doubled_to_cube doubled-q",new d(1,2,-3),new p(1,5).qdoubledToCube()),x.equalHex("doubled_to_cube doubled-r",new d(1,2,-3),new p(4,2).rdoubledToCube())}static testAll(){x.testHexArithmetic(),x.testHexDirection(),x.testHexNeighbor(),x.testHexDiagonal(),x.testHexDistance(),x.testHexRotateRight(),x.testHexRotateLeft(),x.testHexRound(),x.testHexLinedraw(),x.testLayout(),x.testOffsetRoundtrip(),x.testOffsetFromCube(),x.testOffsetToCube(),x.testDoubledRoundtrip(),x.testDoubledFromCube(),x.testDoubledToCube()}}function g(e){console.log("FAIL",e)}x.testAll();s(264),s(262);var f=s(559);class w extends i.Component{constructor(e){super(e),this.Point=(e,t)=>({x:e,y:t}),this.Hex=(e,t)=>({q:e,r:t}),this.Cube=(e,t,s)=>({x:e,y:t,z:s}),this.flat_hex_corner=(e,t)=>{var s=60*t,i=Math.PI/180*s,a=e.x+this.state.hexSize*Math.cos(i),o=e.y+this.state.hexSize*Math.sin(i);return this.Point(a,o)},this.pointy_hex_corner=(e,t)=>{var s=60*t-30,i=Math.PI/180*s,a=e.x+this.state.hexSize*Math.cos(i),o=e.y+this.state.hexSize*Math.sin(i);return this.Point(a,o)},this.drawHex=e=>{let t=[];for(var s=0;s<=5;s++){var i=this.flat_hex_corner(e,s);t.push(new a.FM8(i.x,i.y))}return t},this.hexToPixel=e=>{var t=this.state.hexOrigin,s=this.state.hexSize*Math.sqrt(3)*(e.q+e.r/2)+t.x,i=3*this.state.hexSize/2*e.r+t.y;return this.Point(s,i)},this.pixelToHex=e=>{var t=((e.x-this.state.hexOrigin.x)*Math.sqrt(3)/3-(e.y-this.state.hexOrigin.y)/3)/this.state.hexSize,s=2*(e.y-this.state.hexOrigin.y)/3/this.state.hexSize;return this.hexRound(this.Hex(t,s))},this.cubeDir=e=>[this.Cube(-1,1,0),this.Cube(0,1,-1),this.Cube(1,0,-1),this.Cube(1,-1,0),this.Cube(0,-1,1),this.Cube(-1,0,1)][e],this.cubeAdd=(e,t)=>this.Cube(e.x+t.x,e.y+t.y,e.z+t.z),this.cubeNeighbor=(e,t)=>this.cubeAdd(e,this.cubeDir(t)),this.cubeToAxial=e=>{var t=e.x,s=e.z;return this.Hex(t,s)},this.axialToCube=e=>{var t=e.q,s=e.r,i=-t-i;return this.Cube(t,s,i)},this.cube_to_oddr=e=>{var t=e.x-(e.z-(1&e.z))/2,s=e.z;return this.Hex(t,s)},this.oddr_to_cube=e=>{var t=e.q+(e.r-(1&e.r))/2,s=e.r,i=-t-i;return this.Cube(t,s,i)},this.cube_to_oddq=e=>{var t=e.q,s=e.r+(e.q-(1&e.q))/2;return this.OffsetCoord(t,s)},this.oddq_to_cube=e=>{var t=e.q,s=e.r-(e.q-(1&e.q))/2;return this.Cube(t,s,-t-s)},this.hexRound=e=>this.cubeRound(this.axialToCube(e)),this.cubeRound=e=>{var t=Math.round(e.x),s=Math.round(e.y),i=Math.round(e.z),a=Math.abs(t-e.x),o=Math.abs(s-e.y),n=Math.abs(i-e.z);return a>o&&a>n?t=-s-i:o>n?s=-t-i:i=-t-s,-0===t&&(t=0),-0===s&&(s=0),-0===i&&(i=0),this.Cube(t,s,i)},this.findNeighbors=e=>{let t=[];for(var s=0;s<6;s++){var i=this.cubeNeighbor(this.Cube(e.coordinates.q,e.coordinates.r,e.coordinates.s),s);i.q=i.x,i.r=i.y,i.s=i.z,t.push(i)}return t},this.cubeDistance=(e,t)=>(Math.abs(e.x-t.x)+Math.abs(e.y-t.y)+Math.abs(e.z-t.z))/2,this.lerp=(e,t,s)=>e+(t-e)*s,this.lerpCube=(e,t,s)=>this.Cube(this.lerp(e.x,t.x,s),this.lerp(e.y,t.y,s),this.lerp(e.z,t.z,s)),this.drawLineCube=(e,t)=>{for(var s=this.cubeDistance(e,t),i=[],a=0;a<=s;a++)i.push(this.cubeRound(this.lerpCube(e,t,1/s*a)));return i},this.getHexParameters=()=>{let e=2*this.state.hexSize,t=Math.sqrt(3)/2*e;return{hexWidth:t,hexHeight:e,vertDist:3*e/4,horizDist:t}},this.findActiveNeighbors=e=>this.findNeighbors(e).filter((e=>{const t=this.state.cellsMap.find((t=>t.cube.coordinates.q===e.q&&t.cube.coordinates.r===e.r&&t.cube.coordinates.s===e.s));return t&&t.cube.state})),this.generateGradientMaterials=(e,t,s)=>{const i=[];for(let o=0;o<s;o++){const n=o/(s-1),r=new a.Ilk(e).lerp(new a.Ilk(t),n);i.push(new a.vBJ({color:r}))}return i},this.updateLabelsToFaceUp=e=>{const t=new a.Pa4(0,0,1);e.forEach((e=>{e.quaternion.setFromUnitVectors(e.up,t)}))},this.createTextSprite=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:48;const s=document.createElement("canvas"),i=s.getContext("2d");s.width=64,s.height=64,i.fillStyle="#ffffff",i.font="".concat(t,"px Arial"),i.textAlign="center",i.textBaseline="upper",i.clearRect(0,0,s.width,s.height),i.fillText(e,s.width/2,s.height/2);const o=new a.xEZ(s);o.needsUpdate=!0;const n=new a.xeV({map:o}),r=new a.jyi(n),h=.0075;return r.scale.set(h*s.width,h*s.height,1),r},this.positionLabel=function(e,t,s){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;const o=Math.PI/3,n=-Math.PI/6;let r;switch(t){case"q":r=new a.Pa4(Math.cos(2*o+n),Math.sin(2*o+n),0).multiplyScalar(i),s.material.color.setHex(5878528);break;case"r":r=new a.Pa4(Math.cos(n),Math.sin(n),0).multiplyScalar(i),s.material.color.setHex(39398);break;case"s":r=new a.Pa4(Math.cos(4*o+n),Math.sin(4*o+n),0).multiplyScalar(i),s.material.color.setHex(15079909);break;default:r=new a.Pa4(0,0,.5)}s.position.copy(e.position).add(r)},this.addLabelsToHexagons=()=>{this.gridGroup.children.forEach((e=>{const t=this.createTextSprite("q: ".concat(e.cube.coordinates.q),"'#59b300'",20),s=this.createTextSprite("r: ".concat(e.cube.coordinates.r),"'#0099e6'",20),i=this.createTextSprite("s: ".concat(e.cube.coordinates.s),"'#e619e5'",20);this.positionLabel(e,"q",t),this.positionLabel(e,"r",s),this.positionLabel(e,"s",i),this.labelsArray.push(t),this.labelsArray.push(s),this.labelsArray.push(i)})),this.state.scene.add(...this.labelsArray),this.labelsArray.forEach((e=>{const t=new a.Pa4(0,0,1);e.quaternion.setFromUnitVectors(e.up,t)}))},this.removeLabelsFromHexagons=()=>{this.labelsArray&&(this.labelsArray.forEach((e=>{this.state.scene.remove(e)})),this.labelsArray=[])},this.handleWorkerMessage=e=>{const t=e.data;this.setState({cellsMap:t})},this.createInitialGrid=()=>{this.gridGroup.name="InitGrid";const e=this.createHexagonShape(this.state.hexSize);e.name="HEXAGON";const t=this.state.HexShapeCountRound;let s=[];for(let i=-t;i<=t;i++)for(let o=-t;o<=t;o++){const n=-i-o;if(Math.abs(n)>t)continue;const r=this.hexToPosition(i,o);r.state=Math.random()<.5,r.state?r.lifeTime=1:r.lifeTime=0,r.stateUpdated=!1,r.coordinates={q:i,r:o,s:n},r.roundCoordinates=this.cubeRound(this.Cube(i,o,n)),r.position={x:r.x,y:r.y,z:r.z},r.name="cube_".concat(i,"_").concat(o,"_").concat(n);const h=new a.Kj0(e,r.state?this.hexMaterialActive:this.hexMaterialInactive);h.position.set(r.x,r.y,.1),h.name="cell_".concat(i,"_").concat(o,"_").concat(n),h.cube=r,h.scale.set(.95,.95,1),this.gridGroup.add(h),s.push(h)}this.setState({cellsMap:s}),this.state.scene.add(this.gridGroup)},this.handleRing=()=>{this.reinitializeGrid(!0)},this.reinitializeGrid=e=>{const t=this.state.HexShapeCountRound,s=e?t+1:t-1,i=[];for(let o=-s;o<=s;o++)for(let e=-s;e<=s;e++){const t=-o-e;if(Math.abs(t)>s)continue;const n=this.state.cellsMap.find((t=>t.cube.coordinates.q===o&&t.cube.coordinates.r===e));if(n)i.push(n);else{const s=this.hexToPosition(o,e);s.state=!1,s.lifeTime=s.state?1:0,s.stateUpdated=!1,s.coordinates={q:o,r:e,s:t},s.roundCoordinates=this.cubeRound(this.Cube(o,e,t)),s.position={x:s.x,y:s.y,z:s.z},s.name="cube_".concat(o,"_").concat(e,"_").concat(t);const n=new a.Kj0(this.createHexagonShape(this.state.hexSize),s.state?this.hexMaterialActive:this.hexMaterialInactive);n.position.set(s.x,s.y,.1),n.name="cell_".concat(o,"_").concat(e,"_").concat(t),n.cube=s,n.scale.set(.97,.97,1),i.push(n)}}this.setState({HexShapeCountRound:s}),this.setState({cellsMap:i}),this.state.scene.remove(this.gridGroup),this.gridGroup.children=[],i.forEach((e=>{this.gridGroup.add(e)})),this.state.scene.add(this.gridGroup)},this.saveCurrentState=()=>{const e=[];this.state.cellsMap.forEach((t=>{const s={cube:{...t.cube,coordinates:{...t.cube.coordinates},position:{...t.cube.position}},meshName:t.name,material:t.material,state:t.cube.state,lifeTime:t.cube.lifeTime};e.push(s)})),this.setState({savedState:e}),console.log(e),console.log("Current state saved")},this.loadSavedState=()=>{const e=this.state.savedState;if(!e)return void console.error("No saved state to load.");const t=e.map((e=>{const t=e.cube,s=t.state?this.hexMaterialActive:this.hexMaterialInactive,i=new a.Kj0(this.createHexagonShape(this.state.hexSize),s);return i.position.set(t.position.x,t.position.y,.1),i.name=e.meshName,i.cube={...t},i.scale.set(.97,.97,1),i.material.needsUpdate=!0,i}));this.setState({cellsMap:t},(()=>{this.updateScene()}))},this.updateScene=()=>{this.state.scene.remove(this.gridGroup),this.gridGroup=new a.ZAu,this.state.cellsMap.forEach((e=>{this.gridGroup.add(e)})),this.state.scene.add(this.gridGroup),this.state.renderer&&this.state.camera&&this.state.renderer.render(this.state.scene,this.state.camera)},this.handleGenocide=()=>{const e=new Map;this.state.cellsMap.forEach((t=>{e.set(t.cube.state,!1),e.set(t.cube.lifeTime,0)}));const t=this.state.cellsMap.map((t=>{const s=e.get(t.cube.name);return t.cube.state!==s&&(t.cube.state=s,t.material=s?this.hexMaterialActive:this.hexMaterialInactive,t.material.needsUpdate=!0),t}));this.setState({cellsMap:t}),console.log("Field cleared")},this.handlePopulate=()=>{const e=new Map;this.state.cellsMap.forEach((t=>{let s=Math.random()<.137;t.cube.lifeTime=s?1:0,e.set(t.cube.name,s)}));const t=this.state.cellsMap.map((t=>{const s=e.get(t.cube.name);return t.cube.state!==s&&(t.cube.state=s,t.material=s?this.hexMaterialActive:this.hexMaterialInactive,t.material.needsUpdate=!0),t}));this.setState({cellsMap:t}),console.log("Field populated")},this.startUpdateCycle=()=>{this.interval=setInterval(this.updateFieldState,120)},this.stopUpdateCycle=()=>{clearInterval(this.interval),this.interval=null},this.updateFieldState=(e,t)=>{void 0===e&&(e=1),void 0===t&&(t=1);const s=new Map;this.state.cellsMap.forEach((e=>{const t=this.findActiveNeighbors(e.cube).length,i=e.cube.state;let a=i;a=i?3===t||4===t:2===t,s.set(e.cube.name,a)}));const i=this.state.cellsMap.map((e=>{const t=s.get(e.cube.name);return e.cube.state!==t&&(e.cube.state=t,e.material=t?this.hexMaterialActive:this.hexMaterialInactive,e.material.needsUpdate=!0),e})),a=this.state.history.slice(0,100);if(1===e)a.push(i),this.setState({cellsMap:i,history:a});else if(-1===e&&a.length>1){const e=a[a.length-2];a.pop(),this.setState({cellsMap:e,history:a})}},this.rotateCameraAndZoomToFit=()=>{const e=a.M8C.degToRad(30);this.camera.position.applyAxisAngle(new a.Pa4(0,0,1),e);const t=(new a.ZzF).setFromObject(this.gridGroup),s=new a.Pa4;t.getSize(s);const i=Math.min(window.innerWidth,window.innerHeight)/Math.max(s.x,s.y);this.camera.zoom=i/this.state.HexShapeCountRound,this.camera.updateProjectionMatrix(),this.state.renderer&&this.state.renderer.render(this.state.scene,this.camera),this.orbitControls&&this.orbitControls.rotateLeft(e),this.setState({isCameraRotTriggered:!1})},this.start=()=>{this.frameId||(this.frameId=requestAnimationFrame(this.animate))},this.stop=()=>{cancelAnimationFrame(this.frameId)},this.animate=()=>{this.delta=this.clock.getDelta(),this.timer=.01*Date.now(),this.renderScene(this.delta),this.frameId=window.requestAnimationFrame(this.animate)},this.pasteState=()=>{},this.keyup=e=>{"S"===e.key||"s"===e.key?this.saveCurrentState():"P"!==e.key&&"p"!==e.key||this.loadSavedState()},this.handleMouseDown=e=>{0===e.button&&(e.preventDefault(),this.setState({isDrawing:!0}),this.toggleHexState(e))},this.handleLongTouch=e=>{e.preventDefault(),this.setState({isDrawing:!0}),this.toggleHexState(e)},this.handleTouchEnd=e=>{this.setState({isDrawing:!1})},this.handleMouseMove=e=>{this.state.isDrawing&&0===e.button&&(e.preventDefault(),this.toggleHexState(e))},this.handleMouseUp=e=>{0===e.button&&this.setState({isDrawing:!1,lastPosition:{}})},this.toggleHexState=e=>{if(!e.target)return void console.error("Event target is undefined. Cannot proceed with toggleHexState.");const t=e.target.getBoundingClientRect(),s=e.clientX-t.left,i=e.clientY-t.top,o=(t.height,new a.FM8(s/t.width*2-1,-i/t.height*2+1));if(t.height<256)return;this.raycaster.setFromCamera(o,this.camera);const n=this.raycaster.intersectObjects(this.state.cellsMap,!1);if(n.length>0){const e=n[0].object;if(this.state.lastPosition!==e.cube.coordinates){const t=!e.cube.state;this.setState((s=>{const i=s.cellsMap.findIndex((t=>t===e)),a=[...s.cellsMap];return a[i].cube.state=t,a[i].material=t?this.hexMaterialActive:this.hexMaterialInactive,a[i].material.needsUpdate=!0,{cellsMap:a}})),this.setState({lastPosition:e.cube.coordinates})}}},this.renderScene=()=>{this.state.renderer.render(this.state.scene,this.camera)},a.Tme.DefaultUp=new a.Pa4(0,0,1);const t=new a.xsS;this.container=i.createRef();const s=new a.cPb(70,this.container.scrollWidth/this.container.scrollWidth,.01,256);s.position.y=0,s.position.z=25,s.position.x=0,s.layers.enable(1),s.up.set(0,0,1),s.updateMatrix(),s.updateProjectionMatrix();const o=new a.CP7({alpha:!1,antialias:!1});this.camera=s,this.clock=new a.SUY;const n=new c(this.camera,o.domElement);n.enableDamping=!0,n.dampingFactor=.25,n.screenSpacePanning=!1,n.minDistance=4,n.maxDistance=128,n.enablePan=!1,n.maxPolarAngle=Math.PI/2-.9,n.update(),this.controls=n,this.gridGroup=new a.ZAu,this.labelsArray=[],this.savedState=[],this.delay=1,this.active=0,this.state={scene:t,renderer:o,history:[],isLabeled:this.props.isLabeled||!1,isLabeledTriggered:!1,isPlay:this.props.isPlay||!1,isGenocide:this.props.isGenocide||!1,isGenocideTriggered:!1,isCameraRot:this.props.isCameraRot||!1,isCameraRotTriggered:!1,isPopulate:this.props.isPopulate||!1,isPopulateTriggered:!1,currentPopulation:0,previousPopulation:0,isDrawing:!1,lastPosition:{},clientWidth:256,clientHeight:256,mouse:{x:0,y:0},position:{x:0,y:0},hexSize:1,hexSize2D:80,HexShapeCountRound:this.props.healpixProps.detail||6,hexOrigin:{x:0,y:0},cellsMap:[],lastPosition:{},round:3,cd:3447003},this.updateScreenSize=this.updateScreenSize.bind(this),this.keyup=this.keyup.bind(this),this.handleMouseDown=this.handleMouseDown.bind(this),this.handleMouseMove=this.handleMouseMove.bind(this),this.handleMouseUp=this.handleMouseUp.bind(this),this.saveCurrentState=this.saveCurrentState.bind(this),this.loadSavedState=this.loadSavedState.bind(this),this.labelsVisible=!1,this.labels=[];this.mixers=[],this.raycaster=new a.iMs,this.pointer=new a.FM8,this.state.scene.background=(new a.Ilk).set("#272727"),this.state.scene.fog=new a.ybr(this.state.scene.background,200,1e3),this.hemiLight=new a.vmT(16777215,16777215,.1),this.hemiLight.color.setHSL(.6,.6,1),this.hemiLight.groundColor.setHSL(.095,.75,1),this.dirLight=new a.Ox3(16777215,1),this.dirLight.color.setHSL(.1,1,.95),this.dirLight.position.set(3,3,3),this.dirLight.position.multiplyScalar(10),this.state.scene.add(this.dirLight),this.dirLight.castShadow=!1,this.dirLight.shadow.mapSize.width=512,this.dirLight.shadow.mapSize.height=512,this.shadowDistance=1,this.dirLight.shadow.camera.left=-this.shadowDistance,this.dirLight.shadow.camera.right=this.shadowDistance,this.dirLight.shadow.camera.top=this.shadowDistance,this.dirLight.shadow.camera.bottom=-this.shadowDistance,this.dirLight.shadow.camera.far=350,this.dirLight.shadow.bias=-1e-5,this.vertexShader=document.getElementById("vertexShader").textContent,this.fragmentShader=document.getElementById("fragmentShader").textContent,this.uniforms={topColor:{value:new a.Ilk(30719)},bottomColor:{value:new a.Ilk(14808574)},offset:{value:-1},exponent:{value:.8}},this.uniforms.topColor.value.copy(this.hemiLight.color),this.state.scene.fog.color.copy(this.uniforms.bottomColor.value),this.skyGeo=new a.Aip(1e3,32,15),this.skyGeo.rotateX(-Math.PI/2),this.skyMat=new a.jyz({vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,uniforms:this.uniforms,side:a._Li}),this.sky=new a.Kj0(this.skyGeo,this.skyMat),this.sky.rotateX(-Math.PI/2),this.sky.name="SKYDOME";new a.y8_(5).position.set(1e-4,1e-4,1e-4);new a.VLJ(100,100).rotateX(-Math.PI/2)}componentDidMount(){this.interval=null,this.state.renderer.setPixelRatio(window.devicePixelRatio),this.state.renderer.gammaInput=!0,this.state.renderer.gammaOutput=!0,this.state.renderer.shadowMap.enabled=!0,this.container.appendChild(this.state.renderer.domElement),this.container&&this.updateScreenSize(),window.addEventListener("resize",this.updateScreenSize),window.addEventListener("keyup",this.keyup,!1),window.addEventListener("mousedown",this.handleMouseDown,!1),window.addEventListener("mousemove",this.handleMouseMove,!1),window.addEventListener("mouseup",this.handleMouseUp,!1);this.gradientMaterials=this.generateGradientMaterials(3200456,15438707,10),this.hexMaterialActive=new a.vBJ({color:4732704}),this.hexMaterialActive2=new a.vBJ({color:16142080}),this.hexMaterialActive3=new a.vBJ({color:14499934}),this.hexMaterialActive1=new a.vBJ({color:540244}),this.hexMaterialActive4=new a.vBJ({color:16704}),this.hexMaterialInactive=new a.vBJ({color:14520389}),this.hexMaterialHighlight=new a.vBJ({color:4521796}),this.start(),this.initialGrid=this.createInitialGrid()}componentDidUpdate(e){!this.props.isGenocide||e.isGenocide||this.state.isGenocideTriggered||this.setState({isGenocideTriggered:!1},(()=>{this.handleGenocide()})),!this.props.isPopulate||e.isPopulate||this.state.isPopulateTriggered||this.setState({isPopulateTriggered:!1},(()=>{this.handlePopulate()})),this.props.isPlay&&!e.isPlay?this.startUpdateCycle():!this.props.isPlay&&e.isPlay&&this.interval&&this.stopUpdateCycle(),this.worker&&this.worker.terminate(),this.props.isNext&&!e.isNext&&this.updateFieldState(1),this.props.isPrev&&!e.isPrev&&this.updateFieldState(-1),!this.props.isLabeled||e.isLabeled||this.state.isLabeledTriggered||this.setState({isLabeledTriggered:!0},(()=>{this.addLabelsToHexagons()})),this.props.isLabeled||e.isLabeled||!this.state.isLabeledTriggered||this.setState({isLabeledTriggered:!1},(()=>{this.removeLabelsFromHexagons()})),this.props.healpixProps.detail!==e.healpixProps.detail&&this.setState({HexShapeCountRound:this.props.healpixProps.detail},(()=>{this.handleRing()})),!this.props.isCameraRot||e.isCameraRot||this.state.isCameraRotTriggered||this.setState({isCameraRotTriggered:!0},(()=>{this.rotateCameraAndZoomToFit()}))}componentWillUnmount(){window.removeEventListener("resize",this.updateScreenSize),window.removeEventListener("keyup",this.keyup,!1),window.removeEventListener("mousedown",this.handleMouseDown,!1),window.removeEventListener("mousemove",this.handleMouseMove,!1),window.removeEventListener("mouseup",this.handleMouseUp,!1),this.container.removeChild(this.state.renderer.domElement),this.stopUpdateCycle(),this.removeLabelsFromHexagons()}createHexagonShape(e){const t=new a.bnF;for(let s=0;s<6;s++){const i=Math.PI/3*s,a={x:e*Math.cos(i),y:e*Math.sin(i)};0===s?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y)}return t.closePath(),new a.HW6(t)}hexToPosition(e,t){const s=3*this.state.hexSize/2*e,i=this.state.hexSize*Math.sqrt(3)*(t+e/2);return new a.Pa4(s,i,0)}updateScreenSize(){let e=window.innerWidth,t=window.innerHeight-74;this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.state.renderer.setSize(e,t)}render(){return(0,f.jsx)(o.Z,{children:(0,f.jsx)("div",{ref:e=>this.container=e,onKeyDown:this.start,onKeyUp:this.stop})})}}const v=w;s(625);class C extends i.Component{constructor(e){super(e),this.socket=null,this.handleClick=this.handleClick.bind(this),this.userPos=this.userPos.bind(this),this.lastPose={x:"15",y:"15"},this.state={endpoint:"ws://localhost:9002",username:"user",password:"pass",token:"",color:"#795548",rnd:14,colors:["#24A14E","#E91E63","#92329B","#673AB7","#3F51B5","#2196F3","#03A9F4","#00BCD4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548","#9E9E9E","#607D8B"]}}signup(){const e=JSON.stringify({type:"signup",username:this.state.username,password:this.state.password});this.socket.send(e)}login(){const e=JSON.stringify({type:"login",username:this.state.username,password:this.state.password});this.socket.send(e)}handleServerMessages(e){const t=JSON.parse(e.data);switch(t.type){case"signup":"successful"===t.status&&console.log("Signup successful");break;case"login":t.token&&(this.setState({token:t.token}),console.log("Login successful, token received"));break;case"error":console.error(t.error);break;default:console.log("Unknown message type:",t.type)}}componentDidMount(){this.socket=new WebSocket(this.state.endpoint),this.socket.onopen=()=>{console.log("Connected to the WebSocket server")},this.socket.onmessage=this.handleServerMessages.bind(this),this.socket.onclose=()=>{console.log("Disconnected from the WebSocket server")},this.socket.onerror=e=>{console.error("WebSocket error:",e)}}componentWillUnmount(){this.socket.close()}handleClick(){console.log("Clicked");const e=this.getRandomInt(0,this.state.colors.length),t=this.state.colors[e];this.setState({rnd:e,color:t}),this.cc(t)}cc(e){const t=JSON.stringify({type:"cc",color:e});this.socket.send(t)}userPos(e,t){if(this.lastPose.x!==e||this.lastPose.y!==t){const s=JSON.stringify({type:"userPos",x:e,y:t});this.socket.send(s),this.lastPose={x:e,y:t}}}render(){return(0,f.jsx)(v,{className:"GOL",healpixProps:this.props.healpixProps,isPlay:this.props.isPlay,isNext:this.props.isNext,isPrev:this.props.isPrev,isGenocide:this.props.isGenocide,isCameraRot:this.props.isCameraRot,isPopulate:this.props.isPopulate,isLabeled:this.props.isLabeled,usercolor:"blue"})}}const y=C;var P=s(946),M=s(905);class S extends i.Component{constructor(e){super(e),this.isPlayClick=()=>{const e=!this.state.isPlay;this.setState({isPlay:e},(()=>{this.props.isPlayChange(e)}))},this.state={isPlay:this.props.isPlayInit||!1}}render(){const e="play ".concat(this.state.isPlay?"inactive":"");return(0,f.jsx)("button",{onClick:this.isPlayClick,className:e,children:this.state.isPlay?(0,f.jsx)(P.G,{icon:M.XQY}):(0,f.jsx)(P.G,{icon:M.zc})})}}const E=S;class q extends i.Component{constructor(e){super(e),this.handleNextClick=()=>{this.props.isNextChange()}}render(){return(0,f.jsx)("button",{onClick:this.handleNextClick,className:"next-button",children:(0,f.jsx)(P.G,{icon:M.Ybx})})}}const T=q;class D extends i.Component{constructor(e){super(e),this.handlePrevClick=()=>{this.props.isPrevChange()}}render(){return(0,f.jsx)("button",{onClick:this.handlePrevClick,className:"prev-button",children:(0,f.jsx)(P.G,{icon:M.uYr})})}}const k=D;class N extends i.Component{constructor(e){super(e),this.handleGenocideClick=()=>{this.props.isGenocideChange()}}render(){return(0,f.jsx)("button",{onClick:this.handleGenocideClick,className:"genocide",children:(0,f.jsx)(P.G,{icon:M.dCw})})}}const L=N;class O extends i.Component{constructor(e){super(e),this.handlePopulateClick=()=>{this.props.isPopulateChange()}}render(){return(0,f.jsx)("button",{onClick:this.handlePopulateClick,className:"populate",children:(0,f.jsx)(P.G,{icon:M.RJo})})}}const H=O;class A extends i.Component{constructor(e){super(e),this.handleCameraRotClick=()=>{this.props.isCameraRotChange()}}render(){return(0,f.jsx)("button",{onClick:this.handleCameraRotClick,className:"camera-button",children:(0,f.jsx)(P.G,{icon:M._jT})})}}const R=A;class _ extends i.Component{constructor(e){super(e),this.handleIncreaseClick=()=>{this.state.value<this.props.maxValue&&this.setState((e=>{const t=e.value+this.props.step;return this.props.onValueChange(t),{value:t}}))},this.handleDecreaseClick=()=>{this.state.value>this.props.minValue&&this.setState((e=>{const t=e.value-this.props.step;return this.props.onValueChange(t),{value:t}}))},this.state={value:this.props.initialValue||1}}render(){return(0,f.jsxs)("div",{className:"value-toggle-container",children:[(0,f.jsx)("button",{onClick:this.handleDecreaseClick,className:"control-button",children:(0,f.jsx)(P.G,{icon:M.Kl4,className:"control-icon"})}),(0,f.jsx)("div",{className:"value-display",children:this.state.value}),(0,f.jsx)("button",{onClick:this.handleIncreaseClick,className:"control-button",children:(0,f.jsx)(P.G,{icon:M.r8p,className:"control-icon"})})]})}}const j=_;class F extends i.Component{constructor(e){super(e),this.handleDetailChange=e=>{console.log("\u0417\u043d\u0430\u0447\u0435\u043d\u0438\u0435 healpixProps.detail \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c:",e),this.setState((t=>({healpixProps:{...t.healpixProps,detail:e}})))},this.isPlayChange=e=>{console.log("\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 isPlay \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c:",e),this.setState((t=>({...t.isPlay,isPlay:e})))},this.isNextChange=()=>{this.setState((e=>({...e.isNext,isNext:!0}))),console.log("isNextChange: ",this.state.isNext),setTimeout((()=>{this.setState({isNext:!1})}),0)},this.isPrevChange=()=>{this.setState((e=>({...e.isPrev,isPrev:!0}))),console.log("isPrevChange: ",this.state.isPrev),setTimeout((()=>{this.setState({isPrev:!1})}),0)},this.isGenocideChange=()=>{this.setState((e=>({...e.isGenocide,isGenocide:!0}))),console.log("isGenocideChange: ",this.state.isGenocide),setTimeout((()=>{this.setState({isGenocide:!1})}),0)},this.isCameraRotChange=()=>{this.setState((e=>({...e.isCameraRot,isCameraRot:!0}))),console.log("isCameraRotChange: ",this.state.isCameraRot),setTimeout((()=>{this.setState({isCameraRot:!1})}),0)},this.isPopulateChange=()=>{this.setState((e=>({...e.isPopulate,isPopulate:!0}))),console.log("isPopulateChange: ",this.state.isPopulate),setTimeout((()=>{this.setState({isPopulate:!1})}),0)},this.isLabeledChange=e=>{console.log("\u0421\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u0435 isLabeled \u0438\u0437\u043c\u0435\u043d\u0438\u043b\u043e\u0441\u044c:",e),this.setState((t=>({...t.isLabeled,isLabeled:e})))},this.state={healpixProps:{radius:2,detail:6},isPlay:!1,isNext:!1,isPrev:!1,isGenocide:!1,isPopulate:!1,isLabeled:!1,isCameraRot:!1}}render(){return(0,f.jsxs)("div",{className:"bg-gray-200 min-h-screen relative",children:[(0,f.jsx)(y,{healpixProps:this.state.healpixProps,isPlay:this.state.isPlay,isNext:this.state.isNext,isPrev:this.state.isPrev,isGenocide:this.state.isGenocide,isCameraRot:this.state.isCameraRot,isPopulate:this.state.isPopulate,isLabeled:this.state.isLabeled}),(0,f.jsxs)("div",{className:"controls-container",children:[(0,f.jsxs)("div",{className:"value-toggle-container",children:[(0,f.jsx)(j,{initialValue:this.state.healpixProps.detail,minValue:0,maxValue:55,step:1,onValueChange:this.handleDetailChange}),(0,f.jsx)("div",{className:"value-toggle-label",children:"Repeat"})]}),(0,f.jsx)(k,{isPrevChange:this.isPrevChange,isPrevInit:this.state.isPrev}),(0,f.jsx)(E,{isPlayChange:this.isPlayChange,isPlayInit:this.state.isPlay}),(0,f.jsx)(T,{isNextChange:this.isNextChange,isNextInit:this.state.isNext}),(0,f.jsx)(L,{isGenocideChange:this.isGenocideChange}),(0,f.jsx)(H,{isPopulateChange:this.isPopulateChange}),(0,f.jsx)(R,{isCameraRotChange:this.isCameraRotChange})]})]})}}const z=F}}]);
//# sourceMappingURL=993.98e5f50c.chunk.js.map