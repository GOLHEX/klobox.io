{"version":3,"file":"static/js/221.68248b33.chunk.js","mappings":"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","sources":["three/controls/OrbitControls.js","three/hex/Hex.js","three/GameOfLife.js","three/Env.js","components/Play.js","components/Next.js","components/Prev.js","components/Genocide.js","components/Populate.js","components/CameraRot.js","components/ValueToggleButton.js","components/twcssui/GamePage.js"],"sourcesContent":["import * as THREE from \"three\";\n\n\n\n\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n\t//\n\t//    Orbit - left mouse / touch: one-finger move\n\t//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n\t//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\n\tconst _changeEvent = {\n\t\ttype: 'change'\n\t};\n\tconst _startEvent = {\n\t\ttype: 'start'\n\t};\n\tconst _endEvent = {\n\t\ttype: 'end'\n\t};\n\n\tclass OrbitControls extends THREE.EventDispatcher {\n\n\t\tconstructor( object, domElement ) {\n\n\t\t\tsuper();\n\t\t\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\t\t\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\t\t\tthis.object = object;\n\t\t\tthis.domElement = domElement;\n\t\t\tthis.domElement.style.touchAction = 'none'; // disable touch scroll\n\t\t\t// Set to false to disable this control\n\n\t\t\tthis.enabled = true; // \"target\" sets the location of focus, where the object orbits around\n\n\t\t\tthis.target = new THREE.Vector3(); // How far you can dolly in and out ( PerspectiveCamera only )\n\n\t\t\tthis.minDistance = 0;\n\t\t\tthis.maxDistance = Infinity; // How far you can zoom in and out ( OrthographicCamera only )\n\n\t\t\tthis.minZoom = 0;\n\t\t\tthis.maxZoom = Infinity; // How far you can orbit vertically, upper and lower limits.\n\t\t\t// Range is 0 to Math.PI radians.\n\n\t\t\tthis.minPolarAngle = 0; // radians\n\n\t\t\tthis.maxPolarAngle = Math.PI; // radians\n\t\t\t// How far you can orbit horizontally, upper and lower limits.\n\t\t\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\n\t\t\tthis.minAzimuthAngle = - Infinity; // radians\n\n\t\t\tthis.maxAzimuthAngle = Infinity; // radians\n\t\t\t// Set to true to enable damping (inertia)\n\t\t\t// If damping is enabled, you must call controls.update() in your animation loop\n\n\t\t\tthis.enableDamping = false;\n\t\t\tthis.dampingFactor = 0.05; // This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t\t\t// Set to false to disable zooming\n\n\t\t\tthis.enableZoom = true;\n\t\t\tthis.zoomSpeed = 1.0; // Set to false to disable rotating\n\n\t\t\tthis.enableRotate = false;\n\t\t\tthis.rotateSpeed = 1.0; // Set to false to disable panning\n\n\t\t\tthis.enablePan = true;\n\t\t\tthis.panSpeed = 1.0;\n\t\t\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\n\t\t\tthis.keyPanSpeed = 7.0; // pixels moved per arrow key push\n\t\t\t// Set to true to automatically rotate around the target\n\t\t\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\n\t\t\tthis.autoRotate = false;\n\t\t\tthis.autoRotateSpeed = 2.0; // 30 seconds per orbit when fps is 60\n\t\t\t// The four arrow keys\n\n\t\t\tthis.keys = {\n\t\t\t\tLEFT: 'ArrowLeft',\n\t\t\t\tUP: 'ArrowUp',\n\t\t\t\tRIGHT: 'ArrowRight',\n\t\t\t\tBOTTOM: 'ArrowDown'\n\t\t\t}; // Mouse buttons\n\n\t\t\tthis.mouseButtons = {\n\t\t\t\tLEFT: THREE.MOUSE.ROTATE,\n\t\t\t\tMIDDLE: THREE.MOUSE.DOLLY,\n\t\t\t\tRIGHT: THREE.MOUSE.PAN\n\t\t\t}; // Touch fingers\n\n\t\t\tthis.touches = {\n\t\t\t\tONE: THREE.TOUCH.ROTATE,\n\t\t\t\tTWO: THREE.TOUCH.DOLLY_PAN\n\t\t\t}; // for reset\n\n\t\t\tthis.target0 = this.target.clone();\n\t\t\tthis.position0 = this.object.position.clone();\n\t\t\tthis.zoom0 = this.object.zoom; // the target DOM element for key events\n\n\t\t\tthis._domElementKeyEvents = null; //\n\t\t\t// public methods\n\t\t\t//\n\n\t\t\tthis.getPolarAngle = function () {\n\n\t\t\t\treturn spherical.phi;\n\n\t\t\t};\n\n\t\t\tthis.getAzimuthalAngle = function () {\n\n\t\t\t\treturn spherical.theta;\n\n\t\t\t};\n\n\t\t\tthis.getDistance = function () {\n\n\t\t\t\treturn this.object.position.distanceTo( this.target );\n\n\t\t\t};\n\n\t\t\tthis.listenToKeyEvents = function ( domElement ) {\n\n\t\t\t\tdomElement.addEventListener( 'keydown', onKeyDown );\n\t\t\t\tthis._domElementKeyEvents = domElement;\n\n\t\t\t};\n\n\t\t\tthis.saveState = function () {\n\n\t\t\t\tscope.target0.copy( scope.target );\n\t\t\t\tscope.position0.copy( scope.object.position );\n\t\t\t\tscope.zoom0 = scope.object.zoom;\n\n\t\t\t};\n\n\t\t\tthis.reset = function () {\n\n\t\t\t\tscope.target.copy( scope.target0 );\n\t\t\t\tscope.object.position.copy( scope.position0 );\n\t\t\t\tscope.object.zoom = scope.zoom0;\n\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\tscope.update();\n\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}; // this method is exposed, but perhaps it would be better if we can make it private...\n\n\n\t\t\tthis.update = function () {\n\n\t\t\t\tconst offset = new THREE.Vector3(); // so camera.up is the orbit axis\n\n\t\t\t\tconst quat = new THREE.Quaternion().setFromUnitVectors( object.up, new THREE.Vector3( 0, 1, 0 ) );\n\t\t\t\tconst quatInverse = quat.clone().invert();\n\t\t\t\tconst lastPosition = new THREE.Vector3();\n\t\t\t\tconst lastQuaternion = new THREE.Quaternion();\n\t\t\t\tconst twoPI = 2 * Math.PI;\n\t\t\t\treturn function update() {\n\n\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\toffset.copy( position ).sub( scope.target ); // rotate offset to \"y-axis-is-up\" space\n\n\t\t\t\t\toffset.applyQuaternion( quat ); // angle from z-axis around y-axis\n\n\t\t\t\t\tspherical.setFromVector3( offset );\n\n\t\t\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t\t\t} // restrict theta to be between desired limits\n\n\n\t\t\t\t\tlet min = scope.minAzimuthAngle;\n\t\t\t\t\tlet max = scope.maxAzimuthAngle;\n\n\t\t\t\t\tif ( isFinite( min ) && isFinite( max ) ) {\n\n\t\t\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\t\t\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\t\t\tif ( min <= max ) {\n\n\t\t\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tspherical.theta = spherical.theta > ( min + max ) / 2 ? Math.max( min, spherical.theta ) : Math.min( max, spherical.theta );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} // restrict phi to be between desired limits\n\n\n\t\t\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\t\t\t\t\tspherical.makeSafe();\n\t\t\t\t\tspherical.radius *= scale; // restrict radius to be between desired limits\n\n\t\t\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) ); // move target to panned location\n\n\t\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t\t\t}\n\n\t\t\t\t\toffset.setFromSpherical( spherical ); // rotate offset back to \"camera-up-vector-is-up\" space\n\n\t\t\t\t\toffset.applyQuaternion( quatInverse );\n\t\t\t\t\tposition.copy( scope.target ).add( offset );\n\t\t\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\t\t\tsphericalDelta.theta *= 1 - scope.dampingFactor;\n\t\t\t\t\t\tsphericalDelta.phi *= 1 - scope.dampingFactor;\n\t\t\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\t\t\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscale = 1; // update condition is:\n\t\t\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\t\t\tif ( zoomChanged || lastPosition.distanceToSquared( scope.object.position ) > EPS || 8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\t\t\tscope.dispatchEvent( _changeEvent );\n\t\t\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\t\t\tzoomChanged = false;\n\t\t\t\t\t\treturn true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tthis.dispose = function () {\n\n\t\t\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerdown', onPointerDown );\n\t\t\t\tscope.domElement.removeEventListener( 'pointercancel', onPointerCancel );\n\t\t\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel );\n\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\tif ( scope._domElementKeyEvents !== null ) {\n\n\t\t\t\t\tscope._domElementKeyEvents.removeEventListener( 'keydown', onKeyDown );\n\n\t\t\t\t} //scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t\t\t}; //\n\t\t\t// internals\n\t\t\t//\n\n\n\t\t\tconst scope = this;\n\t\t\tconst STATE = {\n\t\t\t\tNONE: - 1,\n\t\t\t\tROTATE: 0,\n\t\t\t\tDOLLY: 1,\n\t\t\t\tPAN: 2,\n\t\t\t\tTOUCH_ROTATE: 3,\n\t\t\t\tTOUCH_PAN: 4,\n\t\t\t\tTOUCH_DOLLY_PAN: 5,\n\t\t\t\tTOUCH_DOLLY_ROTATE: 6\n\t\t\t};\n\t\t\tlet state = STATE.NONE;\n\t\t\tconst EPS = 0.000001; // current position in spherical coordinates\n\n\t\t\tconst spherical = new THREE.Spherical();\n\t\t\tconst sphericalDelta = new THREE.Spherical();\n\t\t\tlet scale = 1;\n\t\t\tconst panOffset = new THREE.Vector3();\n\t\t\tlet zoomChanged = false;\n\t\t\tconst rotateStart = new THREE.Vector2();\n\t\t\tconst rotateEnd = new THREE.Vector2();\n\t\t\tconst rotateDelta = new THREE.Vector2();\n\t\t\tconst panStart = new THREE.Vector2();\n\t\t\tconst panEnd = new THREE.Vector2();\n\t\t\tconst panDelta = new THREE.Vector2();\n\t\t\tconst dollyStart = new THREE.Vector2();\n\t\t\tconst dollyEnd = new THREE.Vector2();\n\t\t\tconst dollyDelta = new THREE.Vector2();\n\t\t\tconst pointers = [];\n\t\t\tconst pointerPositions = {};\n\n\t\t\tfunction getAutoRotationAngle() {\n\n\t\t\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t\t\t}\n\n\t\t\tfunction getZoomScale() {\n\n\t\t\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t\t\t}\n\n\t\t\tfunction rotateLeft( angle ) {\n\n\t\t\t\tsphericalDelta.theta -= angle;\n\n\t\t\t}\n\n\t\t\tfunction rotateUp( angle ) {\n\n\t\t\t\tsphericalDelta.phi -= angle;\n\n\t\t\t}\n\n\t\t\tconst panLeft = function () {\n\n\t\t\t\tconst v = new THREE.Vector3();\n\t\t\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\n\t\t\t\t\tv.multiplyScalar( - distance );\n\t\t\t\t\tpanOffset.add( v );\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tconst panUp = function () {\n\n\t\t\t\tconst v = new THREE.Vector3();\n\t\t\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tv.multiplyScalar( distance );\n\t\t\t\t\tpanOffset.add( v );\n\n\t\t\t\t};\n\n\t\t\t}(); // deltaX and deltaY are in pixels; right and down are positive\n\n\n\t\t\tconst pan = function () {\n\n\t\t\t\tconst offset = new THREE.Vector3();\n\t\t\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\t\t\tconst element = scope.domElement;\n\n\t\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\t\t// perspective\n\t\t\t\t\t\tconst position = scope.object.position;\n\t\t\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\t\t\tlet targetDistance = offset.length(); // half of the fov is center to top of screen\n\n\t\t\t\t\t\ttargetDistance *= Math.tan( scope.object.fov / 2 * Math.PI / 180.0 ); // we use only clientHeight here so aspect ratio does not distort speed\n\n\t\t\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\t\t// orthographic\n\t\t\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\t\t\tscope.enablePan = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t}();\n\n\t\t\tfunction dollyOut( dollyScale ) {\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tscale /= dollyScale;\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\t\tscope.enableZoom = false;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction dollyIn( dollyScale ) {\n\n\t\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t\tscale *= dollyScale;\n\n\t\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\t\t\tscope.object.updateProjectionMatrix();\n\t\t\t\t\tzoomChanged = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\t\t\tscope.enableZoom = false;\n\n\t\t\t\t}\n\n\t\t\t} //\n\t\t\t// event callbacks - update the object state\n\t\t\t//\n\n\n\t\t\tfunction handleMouseDownRotate( event ) {\n\n\t\t\t\trotateStart.set( event.clientX, event.clientY );\n\n\t\t\t}\n\n\t\t\tfunction handleMouseDownDolly( event ) {\n\n\t\t\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t\t\t}\n\n\t\t\tfunction handleMouseDownPan( event ) {\n\n\t\t\t\tpanStart.set( event.clientX, event.clientY );\n\n\t\t\t}\n\n\t\t\tfunction handleMouseMoveRotate( event ) {\n\n\t\t\t\trotateEnd.set( event.clientX, event.clientY );\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\t\t\t\tconst element = scope.domElement;\n\t\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\t\t\t\trotateStart.copy( rotateEnd );\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\t\t\tfunction handleMouseMoveDolly( event ) {\n\n\t\t\t\tdollyEnd.set( event.clientX, event.clientY );\n\t\t\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\t\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t\t}\n\n\t\t\t\tdollyStart.copy( dollyEnd );\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\t\t\tfunction handleMouseMovePan( event ) {\n\n\t\t\t\tpanEnd.set( event.clientX, event.clientY );\n\t\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\t\t\tpanStart.copy( panEnd );\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\t\t\tfunction handleMouseWheel( event ) {\n\n\t\t\t\tif ( event.deltaY < 0 ) {\n\n\t\t\t\t\tdollyIn( getZoomScale() );\n\n\t\t\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\t\t\tdollyOut( getZoomScale() );\n\n\t\t\t\t}\n\n\t\t\t\tscope.update();\n\n\t\t\t}\n\n\t\t\tfunction handleKeyDown( event ) {\n\n\t\t\t\tlet needsUpdate = false;\n\n\t\t\t\tswitch ( event.code ) {\n\n\t\t\t\t\tcase scope.keys.UP:\n\t\t\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.keys.LEFT:\n\t\t\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase scope.keys.RIGHT:\n\t\t\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\t\t\tneedsUpdate = true;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tif ( needsUpdate ) {\n\n\t\t\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tscope.update();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction handleTouchStartRotate() {\n\n\t\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\t\trotateStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\t\t\t\t\trotateStart.set( x, y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction handleTouchStartPan() {\n\n\t\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\t\tpanStart.set( pointers[ 0 ].pageX, pointers[ 0 ].pageY );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst x = 0.5 * ( pointers[ 0 ].pageX + pointers[ 1 ].pageX );\n\t\t\t\t\tconst y = 0.5 * ( pointers[ 0 ].pageY + pointers[ 1 ].pageY );\n\t\t\t\t\tpanStart.set( x, y );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction handleTouchStartDolly() {\n\n\t\t\t\tconst dx = pointers[ 0 ].pageX - pointers[ 1 ].pageX;\n\t\t\t\tconst dy = pointers[ 0 ].pageY - pointers[ 1 ].pageY;\n\t\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\tdollyStart.set( 0, distance );\n\n\t\t\t}\n\n\t\t\tfunction handleTouchStartDollyPan() {\n\n\t\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\t\t\t\tif ( scope.enablePan ) handleTouchStartPan();\n\n\t\t\t}\n\n\t\t\tfunction handleTouchStartDollyRotate() {\n\n\t\t\t\tif ( scope.enableZoom ) handleTouchStartDolly();\n\t\t\t\tif ( scope.enableRotate ) handleTouchStartRotate();\n\n\t\t\t}\n\n\t\t\tfunction handleTouchMoveRotate( event ) {\n\n\t\t\t\tif ( pointers.length == 1 ) {\n\n\t\t\t\t\trotateEnd.set( event.pageX, event.pageY );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst position = getSecondPointerPosition( event );\n\t\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\t\t\t\t\trotateEnd.set( x, y );\n\n\t\t\t\t}\n\n\t\t\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\t\t\t\tconst element = scope.domElement;\n\t\t\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\t\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\t\t\t\trotateStart.copy( rotateEnd );\n\n\t\t\t}\n\n\t\t\tfunction handleTouchMovePan( event ) {\n\n\t\t\t\tif ( pointers.length === 1 ) {\n\n\t\t\t\t\tpanEnd.set( event.pageX, event.pageY );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst position = getSecondPointerPosition( event );\n\t\t\t\t\tconst x = 0.5 * ( event.pageX + position.x );\n\t\t\t\t\tconst y = 0.5 * ( event.pageY + position.y );\n\t\t\t\t\tpanEnd.set( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\t\t\t\tpan( panDelta.x, panDelta.y );\n\t\t\t\tpanStart.copy( panEnd );\n\n\t\t\t}\n\n\t\t\tfunction handleTouchMoveDolly( event ) {\n\n\t\t\t\tconst position = getSecondPointerPosition( event );\n\t\t\t\tconst dx = event.pageX - position.x;\n\t\t\t\tconst dy = event.pageY - position.y;\n\t\t\t\tconst distance = Math.sqrt( dx * dx + dy * dy );\n\t\t\t\tdollyEnd.set( 0, distance );\n\t\t\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\t\t\t\tdollyOut( dollyDelta.y );\n\t\t\t\tdollyStart.copy( dollyEnd );\n\n\t\t\t}\n\n\t\t\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\t\t\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t\t\t}\n\n\t\t\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\t\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\t\t\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t\t\t} //\n\t\t\t// event handlers - FSM: listen for events and reset state\n\t\t\t//\n\n\n\t\t\tfunction onPointerDown( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\t\tscope.domElement.setPointerCapture( event.pointerId );\n\t\t\t\t\tscope.domElement.addEventListener( 'pointermove', onPointerMove );\n\t\t\t\t\tscope.domElement.addEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\t} //\n\n\n\t\t\t\taddPointer( event );\n\n\t\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\t\tonTouchStart( event );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonMouseDown( event );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerMove( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tif ( event.pointerType === 'touch' ) {\n\n\t\t\t\t\tonTouchMove( event );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tonMouseMove( event );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onPointerUp( event ) {\n\n\t\t\t\tremovePointer( event );\n\n\t\t\t\tif ( pointers.length === 0 ) {\n\n\t\t\t\t\tscope.domElement.releasePointerCapture( event.pointerId );\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointermove', onPointerMove );\n\t\t\t\t\tscope.domElement.removeEventListener( 'pointerup', onPointerUp );\n\n\t\t\t\t}\n\n\t\t\t\tscope.dispatchEvent( _endEvent );\n\t\t\t\tstate = STATE.NONE;\n\n\t\t\t}\n\n\t\t\tfunction onPointerCancel( event ) {\n\n\t\t\t\tremovePointer( event );\n\n\t\t\t}\n\n\t\t\tfunction onMouseDown( event ) {\n\n\t\t\t\tlet mouseAction;\n\n\t\t\t\tswitch ( event.button ) {\n\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmouseAction = - 1;\n\n\t\t\t\t}\n\n\t\t\t\tswitch ( mouseAction ) {\n\n\t\t\t\t\tcase THREE.MOUSE.DOLLY:\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\t\thandleMouseDownDolly( event );\n\t\t\t\t\t\tstate = STATE.DOLLY;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.MOUSE.ROTATE:\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase THREE.MOUSE.PAN:\n\t\t\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\t\thandleMouseDownRotate( event );\n\t\t\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\t\thandleMouseDownPan( event );\n\t\t\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onMouseMove( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\n\t\t\t\tswitch ( state ) {\n\n\t\t\t\t\tcase STATE.ROTATE:\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\thandleMouseMoveRotate( event );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase STATE.DOLLY:\n\t\t\t\t\t\tif ( scope.enableZoom === false ) return;\n\t\t\t\t\t\thandleMouseMoveDolly( event );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase STATE.PAN:\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\thandleMouseMovePan( event );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onMouseWheel( event ) {\n\n\t\t\t\tif ( scope.enabled === false || scope.enableZoom === false || state !== STATE.NONE ) return;\n\t\t\t\tevent.preventDefault();\n\t\t\t\tscope.dispatchEvent( _startEvent );\n\t\t\t\thandleMouseWheel( event );\n\t\t\t\tscope.dispatchEvent( _endEvent );\n\n\t\t\t}\n\n\t\t\tfunction onKeyDown( event ) {\n\n\t\t\t\tif ( scope.enabled === false || scope.enablePan === false ) return;\n\t\t\t\thandleKeyDown( event );\n\n\t\t\t}\n\n\t\t\tfunction onTouchStart( event ) {\n\n\t\t\t\ttrackPointer( event );\n\n\t\t\t\tswitch ( pointers.length ) {\n\n\t\t\t\t\tcase 1:\n\t\t\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\t\t\tcase THREE.TOUCH.ROTATE:\n\t\t\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\t\t\thandleTouchStartRotate();\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase THREE.TOUCH.PAN:\n\t\t\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\t\t\thandleTouchStartPan();\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 2:\n\t\t\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\t\t\tcase THREE.TOUCH.DOLLY_PAN:\n\t\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\t\t\t\t\thandleTouchStartDollyPan();\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase THREE.TOUCH.DOLLY_ROTATE:\n\t\t\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\t\t\t\t\t\t\t\thandleTouchStartDollyRotate();\n\t\t\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tif ( state !== STATE.NONE ) {\n\n\t\t\t\t\tscope.dispatchEvent( _startEvent );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onTouchMove( event ) {\n\n\t\t\t\ttrackPointer( event );\n\n\t\t\t\tswitch ( state ) {\n\n\t\t\t\t\tcase STATE.TOUCH_ROTATE:\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\t\t\t\t\t\thandleTouchMoveRotate( event );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase STATE.TOUCH_PAN:\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\t\t\t\t\t\thandleTouchMovePan( event );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\t\t\t\t\t\thandleTouchMoveDollyPan( event );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\t\t\t\t\t\thandleTouchMoveDollyRotate( event );\n\t\t\t\t\t\tscope.update();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction onContextMenu( event ) {\n\n\t\t\t\tif ( scope.enabled === false ) return;\n\t\t\t\tevent.preventDefault();\n\n\t\t\t}\n\n\t\t\tfunction addPointer( event ) {\n\n\t\t\t\tpointers.push( event );\n\n\t\t\t}\n\n\t\t\tfunction removePointer( event ) {\n\n\t\t\t\tdelete pointerPositions[ event.pointerId ];\n\n\t\t\t\tfor ( let i = 0; i < pointers.length; i ++ ) {\n\n\t\t\t\t\tif ( pointers[ i ].pointerId == event.pointerId ) {\n\n\t\t\t\t\t\tpointers.splice( i, 1 );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfunction trackPointer( event ) {\n\n\t\t\t\tlet position = pointerPositions[ event.pointerId ];\n\n\t\t\t\tif ( position === undefined ) {\n\n\t\t\t\t\tposition = new THREE.Vector2();\n\t\t\t\t\tpointerPositions[ event.pointerId ] = position;\n\n\t\t\t\t}\n\n\t\t\t\tposition.set( event.pageX, event.pageY );\n\n\t\t\t}\n\n\t\t\tfunction getSecondPointerPosition( event ) {\n\n\t\t\t\tconst pointer = event.pointerId === pointers[ 0 ].pointerId ? pointers[ 1 ] : pointers[ 0 ];\n\t\t\t\treturn pointerPositions[ pointer.pointerId ];\n\n\t\t\t} //\n\n\n\t\t\tscope.domElement.addEventListener( 'contextmenu', onContextMenu );\n\t\t\tscope.domElement.addEventListener( 'pointerdown', onPointerDown );\n\t\t\tscope.domElement.addEventListener( 'pointercancel', onPointerCancel );\n\t\t\tscope.domElement.addEventListener( 'wheel', onMouseWheel, {\n\t\t\t\tpassive: false\n\t\t\t} ); // force an update at start\n\n\t\t\tthis.update();\n\n\t\t}\n\n\t} // This set of controls performs orbiting, dollying (zooming), and panning.\n\t// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n\t// This is very similar to OrbitControls, another set of touch behavior\n\t//\n\t//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n\t//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n\t//    Pan - left mouse, or arrow keys / touch: one-finger move\n\n\n\tclass MapControls extends OrbitControls {\n\n\t\tconstructor( object, domElement ) {\n\n\t\t\tsuper( object, domElement );\n\t\t\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\t\t\tthis.mouseButtons.LEFT = THREE.MOUSE.PAN;\n\t\t\tthis.mouseButtons.RIGHT = THREE.MOUSE.ROTATE;\n\t\t\tthis.touches.ONE = THREE.TOUCH.PAN;\n\t\t\tthis.touches.TWO = THREE.TOUCH.DOLLY_ROTATE;\n\n\t\t}\n\n\t}\nexport {\n\tOrbitControls,\n\tMapControls\n};\n\t//THREE.MapControls = MapControls;\n\t//THREE.OrbitControls = OrbitControls;","import React, { Component, useState } from 'react';\r\nimport * as THREE from 'three';\r\n\r\nexport class Point {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n}\r\nexport class Hex {\r\n    constructor(q, r, s) {\r\n        this.q = q;\r\n        this.r = r;\r\n        this.s = s;\r\n        if (Math.round(q + r + s) !== 0)\r\n            throw \"q + r + s must be 0\";\r\n    }\r\n    add(b) {\r\n        return new Hex(this.q + b.q, this.r + b.r, this.s + b.s);\r\n    }\r\n    subtract(b) {\r\n        return new Hex(this.q - b.q, this.r - b.r, this.s - b.s);\r\n    }\r\n    scale(k) {\r\n        return new Hex(this.q * k, this.r * k, this.s * k);\r\n    }\r\n    rotateLeft() {\r\n        return new Hex(-this.s, -this.q, -this.r);\r\n    }\r\n    rotateRight() {\r\n        return new Hex(-this.r, -this.s, -this.q);\r\n    }\r\n    static direction(direction) {\r\n        return Hex.directions[direction];\r\n    }\r\n    neighbor(direction) {\r\n        return this.add(Hex.direction(direction));\r\n    }\r\n    diagonalNeighbor(direction) {\r\n        return this.add(Hex.diagonals[direction]);\r\n    }\r\n    len() {\r\n        return (Math.abs(this.q) + Math.abs(this.r) + Math.abs(this.s)) / 2;\r\n    }\r\n    distance(b) {\r\n        return this.subtract(b).len();\r\n    }\r\n    round() {\r\n        var qi = Math.round(this.q);\r\n        var ri = Math.round(this.r);\r\n        var si = Math.round(this.s);\r\n        var q_diff = Math.abs(qi - this.q);\r\n        var r_diff = Math.abs(ri - this.r);\r\n        var s_diff = Math.abs(si - this.s);\r\n        if (q_diff > r_diff && q_diff > s_diff) {\r\n            qi = -ri - si;\r\n        }\r\n        else if (r_diff > s_diff) {\r\n            ri = -qi - si;\r\n        }\r\n        else {\r\n            si = -qi - ri;\r\n        }\r\n        return new Hex(qi, ri, si);\r\n    }\r\n    lerp(b, t) {\r\n        return new Hex(this.q * (1.0 - t) + b.q * t, this.r * (1.0 - t) + b.r * t, this.s * (1.0 - t) + b.s * t);\r\n    }\r\n    linedraw(b) {\r\n        var N = this.distance(b);\r\n        var a_nudge = new Hex(this.q + 1e-06, this.r + 1e-06, this.s - 2e-06);\r\n        var b_nudge = new Hex(b.q + 1e-06, b.r + 1e-06, b.s - 2e-06);\r\n        var results = [];\r\n        var step = 1.0 / Math.max(N, 1);\r\n        for (var i = 0; i <= N; i++) {\r\n            results.push(a_nudge.lerp(b_nudge, step * i).round());\r\n        }\r\n        return results;\r\n    }\r\n}\r\nHex.directions = [new Hex(1, 0, -1), new Hex(1, -1, 0), new Hex(0, -1, 1), new Hex(-1, 0, 1), new Hex(-1, 1, 0), new Hex(0, 1, -1)];\r\nHex.diagonals = [new Hex(2, -1, -1), new Hex(1, -2, 1), new Hex(-1, -1, 2), new Hex(-2, 1, 1), new Hex(-1, 2, -1), new Hex(1, 1, -2)];\r\nexport class OffsetCoord {\r\n    constructor(col, row) {\r\n        this.col = col;\r\n        this.row = row;\r\n    }\r\n    static qoffsetFromCube(offset, h) {\r\n        var col = h.q;\r\n        var row = h.r + (h.q + offset * (h.q & 1)) / 2;\r\n        if (offset !== OffsetCoord.EVEN && offset !== OffsetCoord.ODD) {\r\n            throw \"offset must be EVEN (+1) or ODD (-1)\";\r\n        }\r\n        return new OffsetCoord(col, row);\r\n    }\r\n    static qoffsetToCube(offset, h) {\r\n        var q = h.col;\r\n        var r = h.row - (h.col + offset * (h.col & 1)) / 2;\r\n        var s = -q - r;\r\n        if (offset !== OffsetCoord.EVEN && offset !== OffsetCoord.ODD) {\r\n            throw \"offset must be EVEN (+1) or ODD (-1)\";\r\n        }\r\n        return new Hex(q, r, s);\r\n    }\r\n    static roffsetFromCube(offset, h) {\r\n        var col = h.q + (h.r + offset * (h.r & 1)) / 2;\r\n        var row = h.r;\r\n        if (offset !== OffsetCoord.EVEN && offset !== OffsetCoord.ODD) {\r\n            throw \"offset must be EVEN (+1) or ODD (-1)\";\r\n        }\r\n        return new OffsetCoord(col, row);\r\n    }\r\n    static roffsetToCube(offset, h) {\r\n        var q = h.col - (h.row + offset * (h.row & 1)) / 2;\r\n        var r = h.row;\r\n        var s = -q - r;\r\n        if (offset !== OffsetCoord.EVEN && offset !== OffsetCoord.ODD) {\r\n            throw \"offset must be EVEN (+1) or ODD (-1)\";\r\n        }\r\n        return new Hex(q, r, s);\r\n    }\r\n}\r\nOffsetCoord.EVEN = 1;\r\nOffsetCoord.ODD = -1;\r\nexport class DoubledCoord {\r\n    constructor(col, row) {\r\n        this.col = col;\r\n        this.row = row;\r\n    }\r\n    static qdoubledFromCube(h) {\r\n        var col = h.q;\r\n        var row = 2 * h.r + h.q;\r\n        return new DoubledCoord(col, row);\r\n    }\r\n    qdoubledToCube() {\r\n        var q = this.col;\r\n        var r = (this.row - this.col) / 2;\r\n        var s = -q - r;\r\n        return new Hex(q, r, s);\r\n    }\r\n    static rdoubledFromCube(h) {\r\n        var col = 2 * h.q + h.r;\r\n        var row = h.r;\r\n        return new DoubledCoord(col, row);\r\n    }\r\n    rdoubledToCube() {\r\n        var q = (this.col - this.row) / 2;\r\n        var r = this.row;\r\n        var s = -q - r;\r\n        return new Hex(q, r, s);\r\n    }\r\n}\r\nexport class Orientation {\r\n    constructor(f0, f1, f2, f3, b0, b1, b2, b3, start_angle) {\r\n        this.f0 = f0;\r\n        this.f1 = f1;\r\n        this.f2 = f2;\r\n        this.f3 = f3;\r\n        this.b0 = b0;\r\n        this.b1 = b1;\r\n        this.b2 = b2;\r\n        this.b3 = b3;\r\n        this.start_angle = start_angle;\r\n    }\r\n}\r\nexport class Layout {\r\n    constructor(orientation, size, origin) {\r\n        this.orientation = orientation;\r\n        this.size = size;\r\n        this.origin = origin;\r\n    }\r\n    hexToPixel(h) {\r\n        var M = this.orientation;\r\n        var size = this.size;\r\n        var origin = this.origin;\r\n        var x = (M.f0 * h.q + M.f1 * h.r) * size.x;\r\n        var y = (M.f2 * h.q + M.f3 * h.r) * size.y;\r\n        return new Point(x + origin.x, y + origin.y);\r\n    }\r\n    pixelToHex(p) {\r\n        var M = this.orientation;\r\n        var size = this.size;\r\n        var origin = this.origin;\r\n        var pt = new Point((p.x - origin.x) / size.x, (p.y - origin.y) / size.y);\r\n        var q = M.b0 * pt.x + M.b1 * pt.y;\r\n        var r = M.b2 * pt.x + M.b3 * pt.y;\r\n        return new Hex(q, r, -q - r);\r\n    }\r\n    hexCornerOffset(corner) {\r\n        var M = this.orientation;\r\n        var size = this.size;\r\n        var angle = 2.0 * Math.PI * (M.start_angle - corner) / 6.0;\r\n        return new Point(size.x * Math.cos(angle), size.y * Math.sin(angle));\r\n    }\r\n    polygonCorners(h) {\r\n        var corners = [];\r\n        var center = this.hexToPixel(h);\r\n        for (var i = 0; i < 6; i++) {\r\n            var offset = this.hexCornerOffset(i);\r\n            corners.push(new Point(center.x + offset.x, center.y + offset.y));\r\n        }\r\n        return corners;\r\n    }\r\n}\r\nLayout.pointy = new Orientation(Math.sqrt(3.0), Math.sqrt(3.0) / 2.0, 0.0, 3.0 / 2.0, Math.sqrt(3.0) / 3.0, -1.0 / 3.0, 0.0, 2.0 / 3.0, 0.5);\r\nLayout.flat = new Orientation(3.0 / 2.0, 0.0, Math.sqrt(3.0) / 2.0, Math.sqrt(3.0), 2.0 / 3.0, 0.0, -1.0 / 3.0, Math.sqrt(3.0) / 3.0, 0.0);\r\nclass Tests {\r\n    constructor() { }\r\n    static equalHex(name, a, b) {\r\n        if (!(a.q === b.q && a.s === b.s && a.r === b.r)) {\r\n            complain(name);\r\n        }\r\n    }\r\n    static equalOffsetcoord(name, a, b) {\r\n        if (!(a.col === b.col && a.row === b.row)) {\r\n            complain(name);\r\n        }\r\n    }\r\n    static equalDoubledcoord(name, a, b) {\r\n        if (!(a.col === b.col && a.row === b.row)) {\r\n            complain(name);\r\n        }\r\n    }\r\n    static equalInt(name, a, b) {\r\n        if (!(a === b)) {\r\n            complain(name);\r\n        }\r\n    }\r\n    static equalHexArray(name, a, b) {\r\n        Tests.equalInt(name, a.length, b.length);\r\n        for (var i = 0; i < a.length; i++) {\r\n            Tests.equalHex(name, a[i], b[i]);\r\n        }\r\n    }\r\n    static testHexArithmetic() {\r\n        Tests.equalHex(\"hex_add\", new Hex(4, -10, 6), new Hex(1, -3, 2).add(new Hex(3, -7, 4)));\r\n        Tests.equalHex(\"hex_subtract\", new Hex(-2, 4, -2), new Hex(1, -3, 2).subtract(new Hex(3, -7, 4)));\r\n    }\r\n    static testHexDirection() {\r\n        Tests.equalHex(\"hex_direction\", new Hex(0, -1, 1), Hex.direction(2));\r\n    }\r\n    static testHexNeighbor() {\r\n        Tests.equalHex(\"hex_neighbor\", new Hex(1, -3, 2), new Hex(1, -2, 1).neighbor(2));\r\n    }\r\n    static testHexDiagonal() {\r\n        Tests.equalHex(\"hex_diagonal\", new Hex(-1, -1, 2), new Hex(1, -2, 1).diagonalNeighbor(3));\r\n    }\r\n    static testHexDistance() {\r\n        Tests.equalInt(\"hex_distance\", 7, new Hex(3, -7, 4).distance(new Hex(0, 0, 0)));\r\n    }\r\n    static testHexRotateRight() {\r\n        Tests.equalHex(\"hex_rotate_right\", new Hex(1, -3, 2).rotateRight(), new Hex(3, -2, -1));\r\n    }\r\n    static testHexRotateLeft() {\r\n        Tests.equalHex(\"hex_rotate_left\", new Hex(1, -3, 2).rotateLeft(), new Hex(-2, -1, 3));\r\n    }\r\n    static testHexRound() {\r\n        var a = new Hex(0.0, 0.0, 0.0);\r\n        var b = new Hex(1.0, -1.0, 0.0);\r\n        var c = new Hex(0.0, -1.0, 1.0);\r\n        Tests.equalHex(\"hex_round 1\", new Hex(5, -10, 5), new Hex(0.0, 0.0, 0.0).lerp(new Hex(10.0, -20.0, 10.0), 0.5).round());\r\n        Tests.equalHex(\"hex_round 2\", a.round(), a.lerp(b, 0.499).round());\r\n        Tests.equalHex(\"hex_round 3\", b.round(), a.lerp(b, 0.501).round());\r\n        Tests.equalHex(\"hex_round 4\", a.round(), new Hex(a.q * 0.4 + b.q * 0.3 + c.q * 0.3, a.r * 0.4 + b.r * 0.3 + c.r * 0.3, a.s * 0.4 + b.s * 0.3 + c.s * 0.3).round());\r\n        Tests.equalHex(\"hex_round 5\", c.round(), new Hex(a.q * 0.3 + b.q * 0.3 + c.q * 0.4, a.r * 0.3 + b.r * 0.3 + c.r * 0.4, a.s * 0.3 + b.s * 0.3 + c.s * 0.4).round());\r\n    }\r\n    static testHexLinedraw() {\r\n        Tests.equalHexArray(\"hex_linedraw\", [new Hex(0, 0, 0), new Hex(0, -1, 1), new Hex(0, -2, 2), new Hex(1, -3, 2), new Hex(1, -4, 3), new Hex(1, -5, 4)], new Hex(0, 0, 0).linedraw(new Hex(1, -5, 4)));\r\n    }\r\n    static testLayout() {\r\n        var h = new Hex(3, 4, -7);\r\n        var flat = new Layout(Layout.flat, new Point(10.0, 15.0), new Point(35.0, 71.0));\r\n        Tests.equalHex(\"layout\", h, flat.pixelToHex(flat.hexToPixel(h)).round());\r\n        var pointy = new Layout(Layout.pointy, new Point(10.0, 15.0), new Point(35.0, 71.0));\r\n        Tests.equalHex(\"layout\", h, pointy.pixelToHex(pointy.hexToPixel(h)).round());\r\n    }\r\n    static testOffsetRoundtrip() {\r\n        var a = new Hex(3, 4, -7);\r\n        var b = new OffsetCoord(1, -3);\r\n        Tests.equalHex(\"conversion_roundtrip even-q\", a, OffsetCoord.qoffsetToCube(OffsetCoord.EVEN, OffsetCoord.qoffsetFromCube(OffsetCoord.EVEN, a)));\r\n        Tests.equalOffsetcoord(\"conversion_roundtrip even-q\", b, OffsetCoord.qoffsetFromCube(OffsetCoord.EVEN, OffsetCoord.qoffsetToCube(OffsetCoord.EVEN, b)));\r\n        Tests.equalHex(\"conversion_roundtrip odd-q\", a, OffsetCoord.qoffsetToCube(OffsetCoord.ODD, OffsetCoord.qoffsetFromCube(OffsetCoord.ODD, a)));\r\n        Tests.equalOffsetcoord(\"conversion_roundtrip odd-q\", b, OffsetCoord.qoffsetFromCube(OffsetCoord.ODD, OffsetCoord.qoffsetToCube(OffsetCoord.ODD, b)));\r\n        Tests.equalHex(\"conversion_roundtrip even-r\", a, OffsetCoord.roffsetToCube(OffsetCoord.EVEN, OffsetCoord.roffsetFromCube(OffsetCoord.EVEN, a)));\r\n        Tests.equalOffsetcoord(\"conversion_roundtrip even-r\", b, OffsetCoord.roffsetFromCube(OffsetCoord.EVEN, OffsetCoord.roffsetToCube(OffsetCoord.EVEN, b)));\r\n        Tests.equalHex(\"conversion_roundtrip odd-r\", a, OffsetCoord.roffsetToCube(OffsetCoord.ODD, OffsetCoord.roffsetFromCube(OffsetCoord.ODD, a)));\r\n        Tests.equalOffsetcoord(\"conversion_roundtrip odd-r\", b, OffsetCoord.roffsetFromCube(OffsetCoord.ODD, OffsetCoord.roffsetToCube(OffsetCoord.ODD, b)));\r\n    }\r\n    static testOffsetFromCube() {\r\n        Tests.equalOffsetcoord(\"offset_from_cube even-q\", new OffsetCoord(1, 3), OffsetCoord.qoffsetFromCube(OffsetCoord.EVEN, new Hex(1, 2, -3)));\r\n        Tests.equalOffsetcoord(\"offset_from_cube odd-q\", new OffsetCoord(1, 2), OffsetCoord.qoffsetFromCube(OffsetCoord.ODD, new Hex(1, 2, -3)));\r\n    }\r\n    static testOffsetToCube() {\r\n        Tests.equalHex(\"offset_to_cube even-\", new Hex(1, 2, -3), OffsetCoord.qoffsetToCube(OffsetCoord.EVEN, new OffsetCoord(1, 3)));\r\n        Tests.equalHex(\"offset_to_cube odd-q\", new Hex(1, 2, -3), OffsetCoord.qoffsetToCube(OffsetCoord.ODD, new OffsetCoord(1, 2)));\r\n    }\r\n    static testDoubledRoundtrip() {\r\n        var a = new Hex(3, 4, -7);\r\n        var b = new DoubledCoord(1, -3);\r\n        Tests.equalHex(\"conversion_roundtrip doubled-q\", a, DoubledCoord.qdoubledFromCube(a).qdoubledToCube());\r\n        Tests.equalDoubledcoord(\"conversion_roundtrip doubled-q\", b, DoubledCoord.qdoubledFromCube(b.qdoubledToCube()));\r\n        Tests.equalHex(\"conversion_roundtrip doubled-r\", a, DoubledCoord.rdoubledFromCube(a).rdoubledToCube());\r\n        Tests.equalDoubledcoord(\"conversion_roundtrip doubled-r\", b, DoubledCoord.rdoubledFromCube(b.rdoubledToCube()));\r\n    }\r\n    static testDoubledFromCube() {\r\n        Tests.equalDoubledcoord(\"doubled_from_cube doubled-q\", new DoubledCoord(1, 5), DoubledCoord.qdoubledFromCube(new Hex(1, 2, -3)));\r\n        Tests.equalDoubledcoord(\"doubled_from_cube doubled-r\", new DoubledCoord(4, 2), DoubledCoord.rdoubledFromCube(new Hex(1, 2, -3)));\r\n    }\r\n    static testDoubledToCube() {\r\n        Tests.equalHex(\"doubled_to_cube doubled-q\", new Hex(1, 2, -3), new DoubledCoord(1, 5).qdoubledToCube());\r\n        Tests.equalHex(\"doubled_to_cube doubled-r\", new Hex(1, 2, -3), new DoubledCoord(4, 2).rdoubledToCube());\r\n    }\r\n    static testAll() {\r\n        Tests.testHexArithmetic();\r\n        Tests.testHexDirection();\r\n        Tests.testHexNeighbor();\r\n        Tests.testHexDiagonal();\r\n        Tests.testHexDistance();\r\n        Tests.testHexRotateRight();\r\n        Tests.testHexRotateLeft();\r\n        Tests.testHexRound();\r\n        Tests.testHexLinedraw();\r\n        Tests.testLayout();\r\n        Tests.testOffsetRoundtrip();\r\n        Tests.testOffsetFromCube();\r\n        Tests.testOffsetToCube();\r\n        Tests.testDoubledRoundtrip();\r\n        Tests.testDoubledFromCube();\r\n        Tests.testDoubledToCube();\r\n    }\r\n}\r\n// Tests\r\nfunction complain(name) { console.log(\"FAIL\", name); }\r\nTests.testAll();\r\n\r\n","// frontend\\src\\three\\GameOfLife.js\nimport React, { Component, useState } from 'react';\n\nimport * as THREE from 'three';\nimport W from \"../wrapper/W.js\"\nimport { MapControls, OrbitControls } from \"./controls/OrbitControls.js\";\nimport Stats from 'stats.js';\nimport { Hex , OffsetCoord} from \"../three/hex/Hex.js\";\nimport { GridHelper } from 'three';\nimport e from 'cors';\nimport { update } from 'lodash';\n\n\nclass GOL extends React.Component {\n    constructor(props) {\n        super(props);\n        THREE.Object3D.DefaultUp = new THREE.Vector3(0,0,1);\n        const scene = new THREE.Scene();\n        this.container = React.createRef();\n        const camera =  new THREE.PerspectiveCamera( 70, this.container.scrollWidth / this.container.scrollWidth, 0.01, 256 );\n        //const camera =  new THREE.PerspectiveCamera( 70, this.container.scrollWidth / this.container.scrollWidth, 0.01, 256 );\n        camera.position.y = 0;\n        camera.position.z = 25;\n        camera.position.x = 0;\n        camera.layers.enable( 1 );\n        camera.up.set(0,0,1);\n        camera.updateMatrix();\n        camera.updateProjectionMatrix();\n        //camera.updateMatrixWorld();\n        const renderer = new THREE.WebGLRenderer({alpha: false, antialias: false });\n        this.camera = camera;\n        this.clock = new THREE.Clock();\n        //const controls = new MapControls( this.camera, renderer.domElement );\n        const controls = new OrbitControls( this.camera, renderer.domElement );\n        controls.enableDamping = true; // an animation loop is required when either damping or auto-rotation are enabled\n        controls.dampingFactor = 0.25;\n        controls.screenSpacePanning = false;\n        controls.minDistance = 4;\n        controls.maxDistance = 128;\n        controls.enablePan = false;\n        controls.maxPolarAngle = Math.PI / 2 - 0.9;\n\n        controls.update();\n        this.controls = controls;\n\n        //this.population = 0;\n\n        //his.initStartFied = [];\n        //this.gridInit = [];\n        this.gridGroup = new THREE.Group();\n        this.labelsArray = [];\n        //console.log(this.props.isGenocide);\n        this.savedState = [];\n        this.delay = 1;\n        this.active = 0;\n        this.state = {\n            scene: scene,\n            renderer: renderer,\n            history: [],\n            isLabeled: this.props.isLabeled || false,\n            isLabeledTriggered: false,\n            isPlay: this.props.isPlay || false,\n            isGenocide: this.props.isGenocide || false,\n            isGenocideTriggered: false,\n            isCameraRot: this.props.isCameraRot || false,\n            isCameraRotTriggered: false,\n            isPopulate: this.props.isPopulate || false,\n            isPopulateTriggered: false,\n            currentPopulation: 0,\n            previousPopulation: 0,\n            isDrawing: false,\n            lastPosition: {},\n            clientWidth: 256,\n            clientHeight: 256,\n            mouse: {\n                x:0,\n                y:0\n            },\n            position: {\n                x:0,\n                y:0\n            },\n            hexSize:1.0,\n            hexSize2D: 80,\n            HexShapeCountRound: this.props.healpixProps.detail || 6,\n            hexOrigin: {\n                x: 0,\n                y:0\n            },\n            cellsMap: [],\n            lastPosition: {},\n            round: 3,\n            cd: 0x3498db\n        };\n\n\n        //  \n        this.updateScreenSize = this.updateScreenSize.bind(this);\n        this.keyup = this.keyup.bind(this);\n        this.handleMouseDown = this.handleMouseDown.bind(this);\n        this.handleMouseMove = this.handleMouseMove.bind(this);\n        this.handleMouseUp = this.handleMouseUp.bind(this);\n        // ...  \n        this.saveCurrentState = this.saveCurrentState.bind(this);\n        this.loadSavedState = this.loadSavedState.bind(this);\n        //    \n        this.labelsVisible = false;\n        //     \n        this.labels = [];\n\n        let mixers = [];\n        this.mixers = mixers;\n        ///Raycaster\n        this.raycaster = new THREE.Raycaster();\n        this.pointer = new THREE.Vector2();\n\n        //let stats = new Stats();\n        //this.stats = stats;\n        //this.stats.showPanel( 0 ); // 0: fps, 1: ms, 2: mb, 3+: custom\n        //document.body.appendChild( this.stats.dom );\n\n        this.state.scene.background = new THREE.Color().set('#795548');\n        this.state.scene.fog = new THREE.Fog( this.state.scene.background, 200, 1000 );\n        // LIGHTS\n        this.hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.1 );\n        this.hemiLight.color.setHSL( 0.6, 0.6, 1 );\n        this.hemiLight.groundColor.setHSL( 0.095, 0.75, 1 );\n\n        this.dirLight = new THREE.DirectionalLight( 0xffffff, 1 );\n        this.dirLight.color.setHSL( 0.1, 1, 0.95 );\n        this.dirLight.position.set( 3, 3, 3 );\n        this.dirLight.position.multiplyScalar( 10 );\n        this.state.scene.add( this.dirLight );\n        this.dirLight.castShadow = false;\n        this.dirLight.shadow.mapSize.width = 512;\n        this.dirLight.shadow.mapSize.height = 512;\n        this.shadowDistance = 1;\n        this.dirLight.shadow.camera.left = -this.shadowDistance;\n        this.dirLight.shadow.camera.right = this.shadowDistance;\n        this.dirLight.shadow.camera.top = this.shadowDistance;\n        this.dirLight.shadow.camera.bottom = -this.shadowDistance;\n        this.dirLight.shadow.camera.far = 350;\n        this.dirLight.shadow.bias = -0.00001;\n        // this.dirLightHeper = new THREE.DirectionalLightHelper( this.dirLight, 1 );\n        // this.state.scene.add( this.dirLightHeper );\n\n        // SKYDOME\n        this.vertexShader = document.getElementById( 'vertexShader' ).textContent;\n        this.fragmentShader = document.getElementById( 'fragmentShader' ).textContent;\n        this.uniforms = {\n            topColor:    { value: new THREE.Color( 0x0077ff ) },\n            bottomColor: { value: new THREE.Color( 0xE1F5FE ) },\n            offset:      { value: -1 },\n            exponent:    { value: 0.8 }\n        };\n        this.uniforms.topColor.value.copy( this.hemiLight.color );\n        this.state.scene.fog.color.copy( this.uniforms.bottomColor.value );\n        this.skyGeo = new THREE.SphereBufferGeometry( 1000, 32, 15 );\n        this.skyGeo.rotateX(-Math.PI/2);\n\n        this.skyMat = new THREE.ShaderMaterial( { vertexShader: this.vertexShader, fragmentShader: this.fragmentShader, uniforms: this.uniforms, side: THREE.BackSide } );\n        this.sky = new THREE.Mesh( this.skyGeo, this.skyMat );\n        this.sky.rotateX(-Math.PI/2);\n        this.sky.name = 'SKYDOME';\n\n        const axesHelper = new THREE.AxesHelper( 5 );\n        axesHelper.position.set( 0.0001, 0.0001, 0.0001 );\n\n        const GridHelper = new THREE.GridHelper (100,100);\n        GridHelper.rotateX(-Math.PI/2);\n        //this.state.scene.add( GridHelper );\n        //console.log(Hex);\n    }\n\n    Point = (x, y) => {\n        return {x: x, y: y}\n    }\n\n    Hex = (q, r) => {\n        return {q: q, r: r}\n    }\n\n    Cube = (x, y, z) => {\n        return {x: x, y: y, z: z}\n    }\n\n    flat_hex_corner = (center, i) => {\n        var angle_deg = 60*i;\n        var angle_rad = Math.PI/180*angle_deg;\n        var x = center.x + this.state.hexSize * Math.cos(angle_rad);\n        var y = center.y + this.state.hexSize * Math.sin(angle_rad);\n        return this.Point(x, y)\n    }\n\n    pointy_hex_corner = (center, i) => {\n        var angle_deg = 60*i-30;\n        var angle_rad = Math.PI/180*angle_deg;\n        var x = center.x + this.state.hexSize * Math.cos(angle_rad);\n        var y = center.y + this.state.hexSize * Math.sin(angle_rad);\n        return this.Point(x, y)\n    }\n\n    drawHex = (center) => {\n        let cellPoints = []\n        for(var i=0; i<=5; i++){\n            var start = this.flat_hex_corner(center, i);\n            cellPoints.push(new THREE.Vector2 (start.x, start.y));\n        }\n        return cellPoints\n    }\n\n    hexToPixel = (h) => {\n        var hexOrigin = this.state.hexOrigin;\n        var x = this.state.hexSize * Math.sqrt(3) * (h.q + h.r/2) + hexOrigin.x;\n        var y = this.state.hexSize * 3/2 * h.r + hexOrigin.y;\n        return this.Point(x, y)\n    }\n\n    pixelToHex = (p) => {\n        var q = ((p.x - this.state.hexOrigin.x) * Math.sqrt(3)/3 - (p.y - this.state.hexOrigin.y)/ 3) / this.state.hexSize;\n        var r = (p.y - this.state.hexOrigin.y) * 2/3 / this.state.hexSize;\n        return this.hexRound(this.Hex(q, r))\n    }\n\n    cubeDir = (dir) => {\n        var cubeDir = [ this.Cube(-1, 1, 0), this.Cube(0, 1, -1), this.Cube(1, 0, -1), this.Cube(1, -1, 0), this.Cube(0, -1, 1), this.Cube(-1, 0, 1) ];\n        return cubeDir[dir];\n    }\n\n    cubeAdd = (a, b) => {\n        return this.Cube(a.x + b.x, a.y + b.y, a.z + b.z)\n    }\n\n    cubeNeighbor = (c, dir) => {\n        return this.cubeAdd(c, this.cubeDir(dir))\n    }\n\n    cubeToAxial = (c) => {\n        var q = c.x;\n        var r = c.z;\n        return this.Hex(q, r)\n    }\n\n    axialToCube = (h) => {\n        var x = h.q;\n        var y = h.r;\n        var z = -x-z;\n        return this.Cube(x, y, z)\n    }\n\n    cube_to_oddr = (c) => {\n        var q = c.x - (c.z - (c.z&1)) / 2;\n        var r = c.z;\n        return this.Hex(q, r)\n    }\n\n    oddr_to_cube = (h) => {\n        var x = h.q + (h.r - (h.r&1)) / 2;\n        var y = h.r;\n        var z = -x-z;\n        return this.Cube(x, y, z)\n    }\n\n    cube_to_oddq = (c) => {\n        var q = c.q\n        var r = c.r + (c.q - (c.q&1)) / 2;\n        return this.OffsetCoord(q, r);\n    }\n\n    oddq_to_cube = (h) => {\n        var q = h.q\n        var r = h.r - (h.q - (h.q&1)) / 2;\n        return this.Cube(q, r, -q-r);\n    }\n\n    hexRound = (h) => {\n        return this.cubeRound(this.axialToCube(h));\n    }\n\n    cubeRound = (c) => {\n        var rx = Math.round(c.x);\n        var ry = Math.round(c.y);\n        var rz = Math.round(c.z);\n\n        var x_diff = Math.abs(rx - c.x);\n        var y_diff = Math.abs(ry - c.y);\n        var z_diff = Math.abs(rz - c.z);\n\n        if (x_diff > y_diff && x_diff > z_diff){\n            rx = -ry-rz;\n        } else if (y_diff > z_diff){\n            ry = -rx-rz;\n        } else {\n            rz = -rx-ry;\n        }\n\n        if(rx === -0){\n            rx = 0;\n        }\n        if(ry === -0){\n            ry = 0;\n        }\n        if(rz === -0){\n            rz = 0;\n        }\n        return this.Cube(rx, ry, rz)\n    }\n\n    findNeighbors = (c) => {\n        let neigbors = [];\n        for(var i=0; i<6; i++){\n            var cube = this.cubeNeighbor(this.Cube(c.coordinates.q, c.coordinates.r, c.coordinates.s), i);\n            cube.q = cube.x;\n            cube.r = cube.y;\n            cube.s = cube.z;\n            neigbors.push(cube)\n        }\n        return neigbors;\n    }\n\n    cubeDistance = (a, b) =>{\n        return (Math.abs(a.x - b.x) + Math.abs(a.y - b.y) + Math.abs(a.z - b.z)) / 2;\n    }\n\n    lerp = (a, b, t) => {\n        return a + (b - a) * t\n    }\n\n    lerpCube = (a, b, t) => {\n        return this.Cube(this.lerp(a.x, b.x, t), this.lerp(a.y, b.y, t), this.lerp(a.z, b.z, t))\n    }\n\n    drawLineCube = (a, b) => {\n        var N = this.cubeDistance(a, b);\n        var results = [];\n        for(var i =0; i<= N; i++){\n            results.push(this.cubeRound(this.lerpCube(a, b, 1.0/N * i)));\n        }\n        return results\n    }\n\n    getHexParameters = () => {\n        let hexHeight = this.state.hexSize * 2;\n        let hexWidth = Math.sqrt(3)/2 * hexHeight;\n        let vertDist = hexHeight * 3/4;\n        let horizDist = hexWidth;\n        return {hexWidth: hexWidth, hexHeight: hexHeight, vertDist: vertDist, horizDist: horizDist}\n    }\n\n    findActiveNeighbors = (cube) => {\n        //      \n        const neighbors = this.findNeighbors(cube);\n        //console.log(neighbors);\n        //  ,   \n        const activeNeighbors = neighbors.filter(neighborCube => {\n            //        cellsMap\n            const neighborCell = this.state.cellsMap.find(cell =>\n                cell.cube.coordinates.q === neighborCube.q &&\n                cell.cube.coordinates.r === neighborCube.r &&\n                cell.cube.coordinates.s === neighborCube.s\n            );\n            return neighborCell && neighborCell.cube.state;\n        });\n    \n        return activeNeighbors;\n    };\n\n    generateGradientMaterials = (startColor, endColor, numberOfMaterials) => {\n        const materials = [];\n      \n        for (let i = 0; i < numberOfMaterials; i++) {\n          //        \n          const ratio = i / (numberOfMaterials - 1);\n      \n          //   ,       \n          const color = new THREE.Color(startColor).lerp(new THREE.Color(endColor), ratio);\n      \n          //     \n          materials.push(new THREE.MeshBasicMaterial({ color: color }));\n        }\n      \n        return materials;\n    }\n \n    ///GPT FUNCTIONS\n    updateLabelsToFaceUp = (labels) => {\n        const up = new THREE.Vector3(0, 0, 1); //  \"\" \n        labels.forEach((label) => {\n            label.quaternion.setFromUnitVectors(label.up, up);\n        });\n    };\n\n    createTextSprite = (message, fontColor = '#ffffff', fontSize = 48) => {\n        //   canvas\n        const canvas = document.createElement('canvas');\n        const context = canvas.getContext('2d');\n\n        //   \n        canvas.width = 64;  //   \n        canvas.height = 64; //   \n\n        //     \n        context.fillStyle = '#ffffff'; //   \n        context.font = `${fontSize}px Arial`;\n        context.textAlign = 'center';\n        context.textBaseline = 'upper';\n        context.clearRect(0, 0, canvas.width, canvas.height); //     \n        context.fillText(message, canvas.width / 2, canvas.height / 2);\n\n        //    \n        const texture = new THREE.Texture(canvas);\n        texture.needsUpdate = true; //  \n\n        //        \n        const material = new THREE.SpriteMaterial({ map: texture });\n\n        //     \n        const sprite = new THREE.Sprite(material);\n        const scale = 0.0075; //       \n        sprite.scale.set(scale * canvas.width, scale * canvas.height, 1);\n        //sprite.center.set(0, 0); // Turn off billboarding\n        return sprite;\n    };\n    \n\n    positionLabel = (cell, axis, label, distance = 0.5) => {\n        const angle = Math.PI / 3; // 60     \n        const offsetAngle = -(Math.PI / 6); //  30   \n        let offset;\n    \n        switch(axis) {\n            case 'q':\n                offset = new THREE.Vector3(Math.cos(angle * 2 + offsetAngle), Math.sin(angle * 2 + offsetAngle), 0).multiplyScalar(distance);\n                label.material.color.setHex(0x59b300); //     Q\n                break;\n            case 'r':\n                offset = new THREE.Vector3(Math.cos(offsetAngle), Math.sin(offsetAngle), 0).multiplyScalar(distance);\n                label.material.color.setHex(0x0099e6); //     R\n                break;\n            case 's':\n                offset = new THREE.Vector3(Math.cos(angle * 4 + offsetAngle), Math.sin(angle * 4 + offsetAngle), 0).multiplyScalar(distance);\n                label.material.color.setHex(0xe619e5); //     S\n                break;\n            default:\n                offset = new THREE.Vector3(0, 0, 0.5);\n                break;\n        }\n    \n        label.position.copy(cell.position).add(offset); //    \n        //label.lookAt(cell.position); //      \n    };\n    \n\n    addLabelsToHexagons = () => {\n        // ,      \n        this.gridGroup.children.forEach(cell => {\n            const qLabel = this.createTextSprite(`q: ${cell.cube.coordinates.q}`, `'#59b300'`, 20);\n            const rLabel = this.createTextSprite(`r: ${cell.cube.coordinates.r}`, `'#0099e6'`, 20);\n            const sLabel = this.createTextSprite(`s: ${cell.cube.coordinates.s}`, `'#e619e5'`, 20);\n    \n            this.positionLabel(cell, 'q', qLabel);\n            this.positionLabel(cell, 'r', rLabel);\n            this.positionLabel(cell, 's', sLabel);\n            \n            this.labelsArray.push(qLabel);\n            this.labelsArray.push(rLabel);\n            this.labelsArray.push(sLabel);\n\n        });\n        this.state.scene.add(...this.labelsArray);\n        this.labelsArray.forEach((label) => {\n            const up = new THREE.Vector3(0, 0, 1); //  \"\" \n            label.quaternion.setFromUnitVectors(label.up, up);\n        });\n    }\n\n    removeLabelsFromHexagons = () => {\n        //    \n        if (this.labelsArray) {\n            this.labelsArray.forEach(label => {\n            this.state.scene.remove(label);\n            });\n            this.labelsArray = []; //    \n        }\n    }  \n\n    // statistics = () => {\n    //     console.log(\"Scene polycount:\", this.state.renderer.info.render.triangles)\n    //     console.log(\"Active Drawcalls:\", this.state.renderer.info.render.calls)\n    //     console.log(\"Textures in Memory\", this.state.renderer.info.memory.textures)\n    //     console.log(\"Geometries in Memory\", this.state.renderer.info.memory.geometries)\n    // }\n\n    componentDidMount() {\n        this.interval = null;\n        this.state.renderer.setPixelRatio( window.devicePixelRatio );\n        this.state.renderer.gammaInput = true;\n        this.state.renderer.gammaOutput = true;\n        this.state.renderer.shadowMap.enabled = true;\n        this.container.appendChild(this.state.renderer.domElement);\n        //this.state.renderer.setSize( this.container.scrollWidth, this.container.scrollHeight );\n        if(this.container){\n            this.updateScreenSize();\n        }\n        window.addEventListener(\"resize\", this.updateScreenSize);\n        window.addEventListener(\"keyup\", this.keyup, false);\n        window.addEventListener('mousedown', this.handleMouseDown, false);\n        window.addEventListener('mousemove', this.handleMouseMove, false);\n        window.addEventListener('mouseup', this.handleMouseUp, false);\n        //window.addEventListener('onMouseOver', this.handleMouseUp, false);\n\n        //     \n        const startColor = 0x30D5C8; // Turquoise\n        const endColor = 0xEB9373;   // Apricot\n        \n        //  10 \n        this.gradientMaterials = this.generateGradientMaterials(startColor, endColor, 10);\n        \n        // gradientMaterials     10    \n        //console.log(this.gradientMaterials);\n\n        this.hexMaterialActive = new THREE.MeshBasicMaterial({ color: 0x483720 });\n        this.hexMaterialActive2 = new THREE.MeshBasicMaterial({ color: 0xF64F00 });\n        this.hexMaterialActive3 = new THREE.MeshBasicMaterial({ color: 0xDD405E });\n        this.hexMaterialActive1 = new THREE.MeshBasicMaterial({ color: 0x083E54 });\n        this.hexMaterialActive4 = new THREE.MeshBasicMaterial({ color: 0x004140 }); \n        \n        \n        this.hexMaterialInactive = new THREE.MeshBasicMaterial({ color: 0xDD9045 });\n        this.hexMaterialHighlight = new THREE.MeshBasicMaterial({ color: 0x44ff44 });\n        this.start();\n        this.initialGrid = this.createInitialGrid();\n        //this.updateGeneration();\n        //this.updateGrid(this.initialGrid);\n        // this.worker = new Worker('./workers/GameWorker.js');\n        // this.worker.onmessage = this.handleWorkerMessage;\n\n    };\n\n    handleWorkerMessage = (e) => {\n        const newCellsMap = e.data;\n        this.setState({ cellsMap: newCellsMap });\n    }\n    \n    // updateFieldState = () => {\n    //     if (this.worker) {\n    //         this.worker.postMessage(this.state.cellsMap);\n    //     }\n    // }\n      \n    componentDidUpdate(prevProps) {\n        //   isGenocide   false  true      \n        if (this.props.isGenocide && !prevProps.isGenocide && !this.state.isGenocideTriggered) {\n          // ,    \n            this.setState({ isGenocideTriggered: false }, () => {\n            //  handleGenocide    \n            this.handleGenocide();\n            });\n        }\n        if (this.props.isPopulate && !prevProps.isPopulate && !this.state.isPopulateTriggered) {\n            // ,    \n            this.setState({ isPopulateTriggered: false }, () => {\n              //  handleGenocide    \n              this.handlePopulate();\n            });\n        }\n        //   isPlay    true,  \n        if (this.props.isPlay && !prevProps.isPlay) {\n            this.startUpdateCycle();\n        }\n        //   isPlay    false,  \n        else if (!this.props.isPlay && prevProps.isPlay && this.interval) {\n            this.stopUpdateCycle();\n        }\n        if (this.worker) {\n            this.worker.terminate();\n        }\n        if(this.props.isNext && !prevProps.isNext){\n            this.updateFieldState(1);\n        }\n        if(this.props.isPrev && !prevProps.isPrev){\n            this.updateFieldState(-1);\n        }\n        if(this.props.isLabeled && !prevProps.isLabeled && !this.state.isLabeledTriggered){\n            this.setState({ isLabeledTriggered: true }, () => {\n                //  handleGenocide    \n                this.addLabelsToHexagons();\n            });\n            \n        }\n        if(!this.props.isLabeled && !prevProps.isLabeled && this.state.isLabeledTriggered){\n            this.setState({ isLabeledTriggered: false }, () => {\n                //  handleGenocide    \n                this.removeLabelsFromHexagons();\n            });\n            \n        }\n        if(this.props.healpixProps.detail !== prevProps.healpixProps.detail){\n            this.setState({ HexShapeCountRound: this.props.healpixProps.detail }, () => {\n                //  handleGenocide    \n                this.handleRing();\n            });\n        }\n        if (this.props.isCameraRot && !prevProps.isCameraRot && !this.state.isCameraRotTriggered) {\n            // ,    \n            this.setState({ isCameraRotTriggered: true }, () => {\n              //  handleGenocide    \n              this.rotateCameraAndZoomToFit();\n            });\n        }\n\n\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener(\"resize\", this.updateScreenSize);\n        window.removeEventListener(\"keyup\", this.keyup, false);\n        window.removeEventListener('mousedown', this.handleMouseDown, false);\n        window.removeEventListener('mousemove', this.handleMouseMove, false);\n        window.removeEventListener('mouseup', this.handleMouseUp, false);\n    \n        //window.removeEventListener('onMouseOver', this.handleMouseUp, false);\n        \n        // ...          \n\n        this.container.removeChild(this.state.renderer.domElement)\n        //this.cleanup();\n        this.stopUpdateCycle(); //    \n        this.removeLabelsFromHexagons()\n    }\n\n\n    createHexagonShape(size) {\n        const shape = new THREE.Shape();\n        for (let i = 0; i < 6; i++) {\n            const angle = (Math.PI / 3) * i;\n            const x = size * Math.cos(angle);\n            const y = size * Math.sin(angle);\n            const start = { x: x, y: y };\n            if (i === 0) {\n                shape.moveTo(start.x, start.y);\n            } else {\n                shape.lineTo(start.x, start.y);\n            }\n        }\n        shape.closePath();\n        return new THREE.ShapeBufferGeometry(shape);\n    }\n\n    //       3D \n    hexToPosition(q, r) {\n        const x =  this.state.hexSize * 3/2 * q;\n        const y =  this.state.hexSize * Math.sqrt(3) * (r + q/2);\n        return new THREE.Vector3(x, y, 0);\n    }\n\n    createInitialGrid = () => {\n        let grid = [];\n        //     \n        this.gridGroup.name = 'InitGrid';\n        const hexGeometry = this.createHexagonShape(this.state.hexSize);\n        hexGeometry.name = 'HEXAGON';\n        //console.log(hexGeometry);\n        const gridRadius = this.state.HexShapeCountRound;\n        let newCellsMap = []; //     \n        for (let q = -gridRadius; q <= gridRadius; q++) {\n            for (let r = -gridRadius; r <= gridRadius; r++) {\n                const s = -q - r;\n                if (Math.abs(s) > gridRadius) continue;\n                //     \n                const cube = this.hexToPosition(q, r);\n                //console.log(cube);\n                cube.state = Math.random() < 0.5;\n                if(cube.state){\n                    cube.lifeTime = 1;\n                } else {\n                    cube.lifeTime = 0;\n                }\n                cube.stateUpdated = false;\n                cube.coordinates = { q: q, r: r, s: s };\n                cube.roundCoordinates = this.cubeRound(this.Cube(q, r, s));\n                cube.position = { x: cube.x, y: cube.y, z: cube.z };\n                cube.name = `cube_${q}_${r}_${s}`;\n                //  mesh  \n                const hexMesh = new THREE.Mesh(hexGeometry, cube.state ? this.hexMaterialActive : this.hexMaterialInactive);\n                hexMesh.position.set(cube.x, cube.y, 0.1);\n                hexMesh.name = `cell_${q}_${r}_${s}`;\n                hexMesh.cube = cube;\n                hexMesh.scale.set(0.97, 0.97, 1); //   ,   \n                this.gridGroup.add(hexMesh);\n                newCellsMap.push(hexMesh); //  mesh   \n                //grid.push(hexMesh);\n            }\n        }\n        //      \n        //console.log(newCellsMap);\n        this.setState({ cellsMap: newCellsMap });\n\n        //    \n        this.state.scene.add(this.gridGroup);\n        \n\n        //  ,       \n        //return this.gridGroup;\n    }\n\n    handleRing = () => {\n        //           \n        this.reinitializeGrid(true); \n         \n    }     \n\n    reinitializeGrid = (addRing) => {\n        const oldGridRadius = this.state.HexShapeCountRound;\n        const newGridRadius = addRing ? oldGridRadius + 1 : oldGridRadius - 1;\n\n        // Create a temporary array to store the new hexagons\n        const newCellsMap = [];\n\n        // Iterate through the hexagons in the old grid\n        for (let q = -newGridRadius; q <= newGridRadius; q++) {\n            for (let r = -newGridRadius; r <= newGridRadius; r++) {\n                const s = -q - r;\n                if (Math.abs(s) > newGridRadius) continue;\n\n                // Check if the hexagon exists in the old grid\n                const existingHexagon = this.state.cellsMap.find(\n                    (cell) => cell.cube.coordinates.q === q && cell.cube.coordinates.r === r\n                );\n\n                // If the hexagon exists, add it to the new grid\n                if (existingHexagon) {\n                    newCellsMap.push(existingHexagon);\n                }\n                // If the hexagon doesn't exist, create a new one\n                else {\n                    const cube = this.hexToPosition(q, r);\n                    cube.state = false;\n                    cube.lifeTime = cube.state ? 1 : 0;\n                    cube.stateUpdated = false;\n                    cube.coordinates = { q: q, r: r, s: s };\n                    cube.roundCoordinates = this.cubeRound(this.Cube(q, r, s));\n                    cube.position = { x: cube.x, y: cube.y, z: cube.z };\n                    cube.name = `cube_${q}_${r}_${s}`;\n\n                    const hexMesh = new THREE.Mesh(\n                        this.createHexagonShape(this.state.hexSize),\n                        cube.state ? this.hexMaterialActive : this.hexMaterialInactive\n                    );\n                    hexMesh.position.set(cube.x, cube.y, 0.1);\n                    hexMesh.name = `cell_${q}_${r}_${s}`;\n                    hexMesh.cube = cube;\n                    hexMesh.scale.set(0.97, 0.97, 1);\n\n                    newCellsMap.push(hexMesh);\n                }\n            }\n        }\n\n        // Update the grid radius in the state\n        this.setState({ HexShapeCountRound: newGridRadius });\n\n        // Update the cells map in the state\n        this.setState({ cellsMap: newCellsMap });\n\n        // Remove the old grid group from the scene\n        this.state.scene.remove(this.gridGroup);\n\n        // Clear the old grid group\n        this.gridGroup.children = [];\n\n        // Add the new hexagons to the grid group\n        newCellsMap.forEach((hexMesh) => {\n            this.gridGroup.add(hexMesh);\n        });\n\n        // Add the grid group back to the scene\n        this.state.scene.add(this.gridGroup);\n    }\n\n    saveCurrentState = () => {\n        //       \n        const currentState = [];\n    \n        //       (state)\n        this.state.cellsMap.forEach((cell) => {\n            //       \n            const cellState = {\n                cube: {\n                    ...cell.cube, //   cube\n                    coordinates: { ...cell.cube.coordinates }, //   \n                    position: { ...cell.cube.position }, //   \n                    //    ,   \n                },\n                meshName: cell.name, //    (   )\n                material: cell.material, //   \n                state: cell.cube.state, //    \n                lifeTime: cell.cube.lifeTime, //   \n                // ...   ,     \n            };\n    \n            //      \n            currentState.push(cellState);\n        });\n    \n        //      currentState,    \n        //         - \n        this.setState({ savedState: currentState });\n        console.log( currentState );\n        console.log('Current state saved');\n    \n        //        (,      localStorage),\n        //    currentState  JSON    \n        // const currentStateJSON = JSON.stringify(currentState);\n        // localStorage.setItem('savedGridState', currentStateJSON);\n        //    ...\n    }\n\n    loadSavedState = () => {\n        //   , ,       \n        const savedState = this.state.savedState;\n    \n        //    ,   \n        if (!savedState) {\n            console.error(\"No saved state to load.\");\n            return;\n        }\n    \n        //     ,      \n        const newCellsMap = savedState.map(savedCell => {\n            const cube = savedCell.cube;\n            //     (THREE.Mesh)   \n            const hexMaterial = cube.state ? this.hexMaterialActive : this.hexMaterialInactive;\n            const hexMesh = new THREE.Mesh(\n                this.createHexagonShape(this.state.hexSize),\n                hexMaterial\n            );\n    \n            //      \n            hexMesh.position.set(cube.position.x, cube.position.y, 0.1);\n            hexMesh.name = savedCell.meshName;\n            hexMesh.cube = { ...cube };\n            hexMesh.scale.set(0.97, 0.97, 1);\n            \n            //   \n            hexMesh.material.needsUpdate = true;\n    \n            return hexMesh;\n        });\n    \n        //   cellsMap  \n        this.setState({ cellsMap: newCellsMap }, () => {\n            //   ,   \n            this.updateScene();\n        });\n    }\n    \n    //    \n    updateScene = () => {\n        //      \n        this.state.scene.remove(this.gridGroup);\n    \n        //     \n        this.gridGroup = new THREE.Group();\n    \n        //        \n        this.state.cellsMap.forEach(hexMesh => {\n            this.gridGroup.add(hexMesh);\n        });\n    \n        //      \n        this.state.scene.add(this.gridGroup);\n    \n        //    ,   \n        if (this.state.renderer && this.state.camera) {\n            this.state.renderer.render(this.state.scene, this.state.camera);\n        }\n    }\n        \n    \n    handleGenocide = () => {\n\n        //       \n        const newStates = new Map();\n\n        //      \n        this.state.cellsMap.forEach(cell => {\n            newStates.set(cell.cube.state, false); //     \"false\"\n            newStates.set(cell.cube.lifeTime, 0); //      \"0\"\n        });\n\n        //       ,  \n        const newCellsMap = this.state.cellsMap.map(cell => {\n            const nextState = newStates.get(cell.cube.name);\n            if (cell.cube.state !== nextState) {\n                cell.cube.state = nextState;\n                cell.material = nextState ? this.hexMaterialActive : this.hexMaterialInactive;\n                cell.material.needsUpdate = true;\n            }\n            return cell;\n        });\n\n        //      \n        this.setState({ cellsMap: newCellsMap });\n        console.log('Field cleared');\n    }\n\n    handlePopulate = () => {\n\n        const newStates = new Map();\n        let maxLifetime = 0;\n        //      \n        this.state.cellsMap.forEach(cell => {\n            let nextState = Math.random() < 0.137;\n            if(nextState){\n                cell.cube.lifeTime = 1;\n            } else {\n                cell.cube.lifeTime = 0;\n            };\n            newStates.set(cell.cube.name, nextState);\n        });\n      \n        //       ,  \n        const newCellsMap = this.state.cellsMap.map(cell => {\n          const nextState = newStates.get(cell.cube.name);\n          if (cell.cube.state !== nextState) {\n            cell.cube.state = nextState;\n            //console.log(cell.cube.lifeTime);    \n            //cell.material = this.gradientMaterials[cell.cube.lifeTime]; //       lifeTime\n            cell.material = nextState ? this.hexMaterialActive : this.hexMaterialInactive;\n            cell.material.needsUpdate = true;\n          }\n          return cell;\n        });\n        //     \n        this.setState({ cellsMap: newCellsMap });\n        //console.log('Generation end, Max lifetime:', maxLifetime);\n        console.log('Field populated');\n    }\n\n    startUpdateCycle = () => {\n        //      updateFieldState\n        this.interval = setInterval(this.updateFieldState, 120); // ,  \n    }\n    \n    stopUpdateCycle = () => {\n        //  \n        clearInterval(this.interval);\n        this.interval = null;\n    }\n\n    updateFieldState = (direction, steps) => {\n\n        if (direction === undefined) {\n            direction = 1;\n        }\n    \n        if (steps === undefined) {\n            steps = 1;\n        }\n\n        const newStates = new Map();\n        this.state.cellsMap.forEach(cell => {\n            const activeNeighbors = this.findActiveNeighbors(cell.cube).length;\n            const currentlyActive = cell.cube.state;\n            let nextState = currentlyActive;\n    \n            if (currentlyActive) {\n                nextState = activeNeighbors === 3 || activeNeighbors === 4;\n            } else {\n                nextState = activeNeighbors === 2;\n            }\n            newStates.set(cell.cube.name, nextState);\n        });\n    \n        const newCellsMap = this.state.cellsMap.map(cell => {\n            const nextState = newStates.get(cell.cube.name);\n            if (cell.cube.state !== nextState) {\n                cell.cube.state = nextState;\n                cell.material = nextState ? this.hexMaterialActive : this.hexMaterialInactive;\n                cell.material.needsUpdate = true;\n            }\n            return cell;\n        });\n    \n        const history = this.state.history.slice(0, 100);\n    \n        if (direction === 1) {\n            history.push(newCellsMap);\n            this.setState({ cellsMap: newCellsMap, history });\n        } else if (direction === -1 && history.length > 1) {\n            //      ,    \n            const prevState = history[history.length - 2];\n            history.pop();\n            this.setState({ cellsMap: prevState, history });\n        }\n    };\n    \n\n    // updateFieldState = (direction = 1, steps = 1) => {\n    //     //       \n    //     const newStates = new Map();\n    //     //let maxLifetime = 0;\n    //     //      \n    //     this.state.cellsMap.forEach(cell => {\n    //         //const lifeTime = cell.cube.lifeTime;\n    //         const activeNeighbors = this.findActiveNeighbors(cell.cube).length;\n    //         const currentlyActive = cell.cube.state;\n    //         let nextState = currentlyActive;\n    //         //let nextLifeTime = lifeTime;\n\n    //         // if (currentlyActive && (activeNeighbors < 2 || activeNeighbors >= 3)) { //       2   3 ,   \n    //         //     nextState = false;\n    //         //     } else if (!currentlyActive && activeNeighbors === 2) { //      3 ,   \n    //         //     nextState = true;\n    //         // }   \n    //         //         \n    //         if (currentlyActive) {\n    //             //    ()\n    //             if (activeNeighbors === 3 || activeNeighbors === 4) {\n    //                 nextState = true; //   ,    3  4  \n    //             } else {\n    //                 nextState = false; //  ,     3   4  \n    //             }\n    //         } else {\n    //             //    ()\n    //             if (activeNeighbors === 2) {\n    //                 nextState = true; //  ,    2  \n    //             } else {\n    //                 nextState = false; //   ,     2   2  \n    //             }\n    //         }\n    //         newStates.set(cell.cube.name, nextState); //      Map\n    //     });\n      \n    //     //       ,  \n    //     const newCellsMap = this.state.cellsMap.map(cell => {\n    //         const nextState = newStates.get(cell.cube.name);\n    //         if (cell.cube.state !== nextState) {\n    //             cell.cube.state = nextState;\n    //             cell.material = nextState ? this.hexMaterialActive : this.hexMaterialInactive;\n    //             cell.material.needsUpdate = true;\n    //         }\n    //         return cell;\n    //     });\n\n    //     //     \n    //     const history = this.state.history.slice(0, 100); //    100 \n\n    //     //   ,        \n    //     //   ,        \n\n    //     if(direction === 1){\n    //         //       \n    //         history.push(newCellsMap);\n    //         this.setState({ cellsMap: newCellsMap, history });\n    //     } else if(direction === -1 && history.length > 1){\n    //         //      \n    //         this.setState({ cellsMap: history[history.length - 1], history });\n    //     }\n    //     console.log(history);\n\n    //     ///console.log('Generation end, Max lifetime:', maxLifetime);\n    // }\n\n    // updateFieldState = () => {\n    //     //       \n    //     const newStates = new Map();\n    //     //let maxLifetime = 0;\n    //     //      \n    //     this.state.cellsMap.forEach(cell => {\n    //         //const lifeTime = cell.cube.lifeTime;\n    //         const activeNeighbors = this.findActiveNeighbors(cell.cube).length;\n    //         const currentlyActive = cell.cube.state;\n    //         let nextState = currentlyActive;\n    //         //let nextLifeTime = lifeTime;\n\n    //         // if (currentlyActive && (activeNeighbors < 2 || activeNeighbors >= 3)) { //       2   3 ,   \n    //         //     nextState = false;\n    //         //     } else if (!currentlyActive && activeNeighbors === 2) { //      3 ,   \n    //         //     nextState = true;\n    //         // }   \n    //         if (currentlyActive) {\n    //             //    ()\n    //             if (activeNeighbors === 3 || activeNeighbors === 4) {\n    //                 nextState = true;\n    //             } else {\n    //                 nextState = false;\n    //             }\n    //         } else {\n    //             if (activeNeighbors === 2) {\n    //                 nextState = true;\n    //             } else {\n    //                 nextState = false;\n    //             }\n    //         }\n    //         newStates.set(cell.cube.name, nextState);\n    //     });\n      \n    //     //       ,  \n    //     const newCellsMap = this.state.cellsMap.map(cell => {\n    //       const nextState = newStates.get(cell.cube.name);\n    //       if (cell.cube.state !== nextState) {\n    //         cell.cube.state = nextState;\n    //         cell.material = nextState ? this.hexMaterialActive : this.hexMaterialInactive;\n    //         cell.material.needsUpdate = true;\n\n    //       }\n    //       return cell;\n    //     });\n    //     //     \n    //     this.setState({ cellsMap: newCellsMap });\n    //     ///console.log('Generation end, Max lifetime:', maxLifetime);\n    // }\n\n\n    // //       \n    // stepGeneration = () => {\n        \n    //     //   updateFieldState     \" ,           \"\n\n\n    // };\n\n\n    rotateCameraAndZoomToFit = () => {\n        // ,       camera,    THREE.PerspectiveCamera\n    \n        //    30    Y\n        const angle = THREE.MathUtils.degToRad(30);\n        this.camera.position.applyAxisAngle(new THREE.Vector3(0, 0, 1), angle);\n    \n        //    ,       \n        const boundingBox = new THREE.Box3().setFromObject(this.gridGroup);\n        const size = new THREE.Vector3();\n        boundingBox.getSize(size);\n    \n        //     \n        const minSide = Math.min(window.innerWidth, window.innerHeight);\n    \n        //          \n        const zoomLevel = minSide / Math.max(size.x, size.y);\n        \n        //     \n        this.camera.zoom = zoomLevel/this.state.HexShapeCountRound;\n        this.camera.updateProjectionMatrix();\n    \n        //  \n        if (this.state.renderer) {\n            this.state.renderer.render(this.state.scene, this.camera);\n        }\n        \n        // //     OrbitControls,    \n        // if (this.orbitControls) {\n        //     this.orbitControls.update();\n        // }\n        //   OrbitControls   \n        if (this.orbitControls) {\n            this.orbitControls.rotateLeft(angle);\n        }\n        this.setState({ isCameraRotTriggered: false });\n\n    }\n    \n    updateScreenSize() {\n        let up_w = window.innerWidth;\n        let up_h = window.innerHeight-74;\n        this.camera.aspect = up_w / up_h;\n        this.camera.updateProjectionMatrix();\n        this.state.renderer.setSize( up_w, up_h );\n    }\n\n    start = () => {\n        if (!this.frameId) {\n          this.frameId = requestAnimationFrame(this.animate)\n        }\n    }\n\n    stop = () => {\n        cancelAnimationFrame(this.frameId)\n    }\n\n    animate = () => {\n        //this.stats.begin();\n        this.delta = this.clock.getDelta();\n        this.timer = Date.now() * 0.01;\n        this.renderScene(this.delta);\n        //this.stats.end();\n        this.frameId = window.requestAnimationFrame(this.animate);\n    }\n\n    pasteState = () => {\n        // Retrieve the saved state from a variable or server\n        // ...\n    }\n\n    // Add event listeners for key presses\n    keyup = (e) => {\n        if (e.key === 'S' || e.key === 's') {\n            this.saveCurrentState();\n        } else if (e.key === 'P' || e.key === 'p') {\n            this.loadSavedState();\n        }\n    }\n    \n    ////     ...  ... \n\n    handleMouseDown = (e) => {\n        if (e.button !== 0) return; //      ,   \n        e.preventDefault(); // prevent scrolling on touch\n        this.setState({ isDrawing: true });\n        this.toggleHexState(e);\n    }\n\n    handleLongTouch = (e) => {\n        e.preventDefault(); // prevent scrolling on touch\n        this.setState({ isDrawing: true });\n        this.toggleHexState(e);\n        // Add your long touch logic here\n    }\n\n    handleTouchEnd = (e) => {\n        this.setState({ isDrawing: false });\n    }\n\n    handleMouseMove = (e) => {\n        if (!this.state.isDrawing || e.button !== 0) return; //      ,        \n        e.preventDefault(); // Prevent scrolling on touch\n        this.toggleHexState(e);\n    }\n\n    handleMouseUp = (e) => {\n        if (e.button !== 0) return;\n        \n        //   ...\n        this.setState({ isDrawing: false, lastPosition: {} });\n    }\n    \n    toggleHexState = (e) => {\n        if (!e.target) {\n            console.error('Event target is undefined. Cannot proceed with toggleHexState.');\n            return;\n        }\n        const rect = e.target.getBoundingClientRect();\n        //console.log(rect);\n        const x = e.clientX - rect.left; // x position within the element.\n        const y = e.clientY - rect.top;  // y position within the element.\n        //    ,     \n        const effectiveHeight = rect.height ; // 50    24  \n\n        const mouse = new THREE.Vector2(\n            (x / rect.width) * 2 - 1,\n            - (y / rect.height) * 2 + 1 //      y  \n        );\n    //console.log(mouse.x, mouse.y);\n        if (rect.height < 256) {\n        //     ,   \n            return;\n        }\n        this.raycaster.setFromCamera(mouse, this.camera);\n    \n        // ,       \n        const intersects = this.raycaster.intersectObjects(this.state.cellsMap, false);\n\n        if (intersects.length > 0) {\n            const cell = intersects[0].object;\n\n            if (this.state.lastPosition !== cell.cube.coordinates) {\n                //   \n                const newState = !cell.cube.state;\n                this.setState(state => {\n                    //       \n                    const index = state.cellsMap.findIndex(h => h === cell);\n                    //    \n                    const newCellsMap = [...state.cellsMap];\n                    //     \n                    newCellsMap[index].cube.state = newState;\n                    //   \n                    newCellsMap[index].material = newState ? this.hexMaterialActive : this.hexMaterialInactive;\n                    newCellsMap[index].material.needsUpdate = true;\n                    //    \n                    return { cellsMap: newCellsMap };\n                });\n                this.setState({ lastPosition: cell.cube.coordinates });\n            }\n        }\n    }\n\n    renderScene = () => {\n        this.state.renderer.render(this.state.scene, this.camera);\n    }\n\n  render() {\n\n    return (\n        <W>\n            <div\n                ref={thisNode => this.container=thisNode}\n                onKeyDown={this.start}\n                onKeyUp={this.stop}\n            />\n        </W>\n    )\n  }\n\n}\n\nexport default GOL;","//frontend\\src\\three\\Env.js\r\nimport React, { Component } from \"react\"\r\n//import uWS from \"uWebSockets.js\"\r\n//import MetaMaskSDK from '@metamask/sdk';\r\n//import Tetra from \"./Tetra\"\r\nimport GOL from \"./GameOfLife.js\"\r\nimport W from \"../wrapper/W.js\"\r\nimport './../tailwind/tailwind.css'\r\n\r\nclass Env extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.socket = null;\r\n    this.handleClick = this.handleClick.bind(this);\r\n    this.userPos = this.userPos.bind(this);\r\n    this.lastPose = { x: '15', y: '15' };\r\n    this.state = {\r\n      endpoint: 'ws://localhost:9002',\r\n      username: 'user',\r\n      password: 'pass',\r\n      token: '',\r\n      color: '#795548',\r\n      rnd: 14,\r\n      colors: [\r\n                  '#24A14E',\r\n                  '#E91E63',\r\n                  '#92329B',\r\n                  '#673AB7',\r\n                  '#3F51B5',\r\n                  '#2196F3',\r\n                  '#03A9F4',\r\n                  '#00BCD4',\r\n                  '#009688',\r\n                  '#4CAF50',\r\n                  '#8BC34A',\r\n                  '#CDDC39',\r\n                  '#FFEB3B',\r\n                  '#FFC107',\r\n                  '#FF9800',\r\n                  '#FF5722',\r\n                  '#795548',\r\n                  '#9E9E9E',\r\n                  '#607D8B'\r\n                ]\r\n    }\r\n  }\r\n\r\n  // ,         \r\n// state = { username: '', password: '', token: '' }\r\n\r\n//    \r\nsignup() {\r\n  const message = JSON.stringify({\r\n    type: 'signup',\r\n    username: this.state.username,\r\n    password: this.state.password\r\n  });\r\n  this.socket.send(message);\r\n}\r\n\r\n//    \r\nlogin() {\r\n  const message = JSON.stringify({\r\n    type: 'login',\r\n    username: this.state.username,\r\n    password: this.state.password\r\n  });\r\n  this.socket.send(message);\r\n}\r\n\r\n//    \r\nhandleServerMessages(event) {\r\n  const data = JSON.parse(event.data);\r\n  switch(data.type) {\r\n    case 'signup':\r\n      if (data.status === 'successful') {\r\n        console.log('Signup successful');\r\n      }\r\n      break;\r\n    case 'login':\r\n      if (data.token) {\r\n        this.setState({ token: data.token });\r\n        console.log('Login successful, token received');\r\n      }\r\n      break;\r\n    case 'error':\r\n      console.error(data.error);\r\n      break;\r\n    default:\r\n      console.log('Unknown message type:', data.type);\r\n  }\r\n}\r\n\r\n//   \r\ncomponentDidMount() {\r\n  this.socket = new WebSocket(this.state.endpoint);\r\n\r\n  this.socket.onopen = () => {\r\n    console.log('Connected to the WebSocket server');\r\n  };\r\n\r\n  this.socket.onmessage = this.handleServerMessages.bind(this);\r\n\r\n  this.socket.onclose = () => {\r\n    console.log('Disconnected from the WebSocket server');\r\n  };\r\n\r\n  this.socket.onerror = (error) => {\r\n    console.error('WebSocket error:', error);\r\n  };\r\n}\r\n\r\n//     \r\ncomponentWillUnmount() {  \r\n  this.socket.close();\r\n}\r\n\r\n\r\n  handleClick() {\r\n    console.log('Clicked');\r\n    const rnd = this.getRandomInt(0, this.state.colors.length);\r\n    const newColor = this.state.colors[rnd];\r\n    this.setState({ rnd, color: newColor });\r\n    this.cc(newColor);\r\n  }\r\n\r\n  cc(cd) {\r\n    const message = JSON.stringify({ type: 'cc', color: cd });\r\n    this.socket.send(message);\r\n  }\r\n\r\n  userPos(x, y) {\r\n    if (this.lastPose.x !== x || this.lastPose.y !== y) {\r\n      const message = JSON.stringify({ type: 'userPos', x, y });\r\n      this.socket.send(message);\r\n      this.lastPose = { x, y };\r\n    }\r\n  }  \r\n\r\n  render() {\r\n    return (\r\n\r\n      //<Tetra io={this.socket} onClick={this.handleClick} userPos={this.userPos} usercolor=\"blue\" />\r\n      //<Tetra io={this.socket} onClick={this.handleClick} userPos={this.userPos} usercolor=\"blue\" healpixProps={this.props.healpixProps} isPlay={this.props.isPlay} />\r\n      <GOL className=\"GOL\" \r\n        /*io={this.socket}*/ \r\n        /*onClick={this.handleClick}*/ \r\n        healpixProps={this.props.healpixProps} \r\n        isPlay={this.props.isPlay} \r\n        isNext={this.props.isNext}\r\n        isPrev={this.props.isPrev}  \r\n        isGenocide={this.props.isGenocide} \r\n        isCameraRot={this.props.isCameraRot} \r\n        isPopulate={this.props.isPopulate}  \r\n        isLabeled={this.props.isLabeled} \r\n        /*userPos={this.userPos}*/\r\n        usercolor=\"blue\" \r\n      />\r\n\r\n    )\r\n  }\r\n}\r\nexport default Env;","import React, { Component } from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlay, faPause } from '@fortawesome/free-solid-svg-icons';\r\nimport './../tailwind/tailwind.css';\r\n\r\nclass Play extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { isPlay: this.props.isPlayInit || false };\r\n  }\r\n\r\n  isPlayClick = () => {\r\n    const newValue = !this.state.isPlay;\r\n    this.setState({ isPlay: newValue }, () => {\r\n      //    ,       \r\n      this.props.isPlayChange(newValue);\r\n    });\r\n  }\r\n\r\n  \r\n  render() {\r\n    const playStyle = `play ${!this.state.isPlay ? '' : 'inactive'}`;\r\n    return (\r\n      <button onClick={this.isPlayClick} className={playStyle}>\r\n        {this.state.isPlay ? <FontAwesomeIcon icon={faPause} /> : <FontAwesomeIcon icon={faPlay} />}\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Play;\r\n","// Next button component\r\nimport React, { Component, useState } from \"react\";\r\nimport './../tailwind/tailwind.css';\r\nimport { random } from \"nanoid\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faStepForward } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nclass Next extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n  }\r\n\r\n  handleNextClick = () => {\r\n    //    ,   \r\n    this.props.isNextChange();\r\n  }\r\n\r\n  render() {\r\n    //   ..\r\n    const nextStyle = `next`;\r\n    return (\r\n      <button onClick={this.handleNextClick} className={nextStyle}>\r\n        <FontAwesomeIcon icon={faStepForward} />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Next;","// Next button component\r\nimport React, { Component, useState } from \"react\";\r\nimport './../tailwind/tailwind.css';\r\nimport { random } from \"nanoid\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faStepBackward } from \"@fortawesome/free-solid-svg-icons\";\r\n\r\nclass Prev extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n  }\r\n\r\n  handlePrevClick = () => {\r\n    //    ,   \r\n    this.props.isPrevChange();\r\n  }\r\n\r\n  render() {\r\n    //   ..\r\n    const prevStyle = `prev`;\r\n    return (\r\n      <button onClick={this.handlePrevClick} className={prevStyle}>\r\n        <FontAwesomeIcon icon={faStepBackward} />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Prev;","// Genocide button component\r\nimport React, { Component, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faGhost } from '@fortawesome/free-solid-svg-icons';\r\nimport './../tailwind/tailwind.css';\r\nimport { random } from \"nanoid\";\r\n\r\nclass Genocide extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n  }\r\n\r\n  handleGenocideClick = () => {\r\n    //    ,   \r\n    this.props.isGenocideChange();\r\n  }\r\n\r\n  render() {\r\n    //   ..\r\n    const genocideStyle = `genocide`;\r\n    return (\r\n      <button onClick={this.handleGenocideClick} className={genocideStyle}>\r\n        <FontAwesomeIcon icon={faGhost} />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Genocide;","// Pop[ulate] button component\r\nimport React, { Component, useState } from \"react\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faDice } from '@fortawesome/free-solid-svg-icons';\r\nimport './../tailwind/tailwind.css';\r\n\r\nimport { random } from \"nanoid\";\r\n\r\nclass Populate extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n  }\r\n\r\n  handlePopulateClick = () => {\r\n    //    ,   \r\n    this.props.isPopulateChange();\r\n  }\r\n\r\n  render() {\r\n    //   ..\r\n    const populateStyle = `populate`;\r\n    return (\r\n      <button onClick={this.handlePopulateClick} className={populateStyle}>\r\n        <FontAwesomeIcon icon={faDice} />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Populate;","// Genocide button component\r\nimport React, { Component, useState } from \"react\";\r\nimport './../tailwind/tailwind.css';\r\nimport { random } from \"nanoid\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faCamera } from '@fortawesome/free-solid-svg-icons';\r\n\r\nclass CameraRot extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n\r\n  handleCameraRotClick = () => {\r\n    //    ,   \r\n    this.props.isCameraRotChange();\r\n  }\r\n\r\n  render() {\r\n    //   ..\r\n    const cameraStyle = `camera-button`;\r\n    return (\r\n      <button onClick={this.handleCameraRotClick} className={cameraStyle}>\r\n        <FontAwesomeIcon icon={faCamera} />\r\n      </button>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CameraRot;","import React, { Component, useState } from \"react\"\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\r\nimport { faPlus, faMinus } from '@fortawesome/free-solid-svg-icons';\r\nimport './../tailwind/tailwind.css';\r\nimport './ValueToggleButton.css';\r\n\r\nclass ValueToggleButton extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      value: this.props.initialValue || 1,\r\n    };\r\n  }\r\n\r\n  handleIncreaseClick = () => {\r\n    if (this.state.value < this.props.maxValue) {\r\n      this.setState(prevState => {\r\n        const newValue = prevState.value + this.props.step;\r\n        this.props.onValueChange(newValue); //    \r\n        return { value: newValue };\r\n      });\r\n    }\r\n  };\r\n\r\n  handleDecreaseClick = () => {\r\n    if (this.state.value > this.props.minValue) {\r\n      this.setState(prevState => {\r\n        const newValue = prevState.value - this.props.step;\r\n        this.props.onValueChange(newValue); //    \r\n        return { value: newValue };\r\n      });\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"value-toggle-container\">\r\n        <button onClick={this.handleDecreaseClick} className=\"control-button\">\r\n          <FontAwesomeIcon icon={faMinus} className=\"control-icon\" />\r\n        </button>\r\n        <div className=\"value-display\">{this.state.value}</div>\r\n        <button onClick={this.handleIncreaseClick} className=\"control-button\">\r\n          <FontAwesomeIcon icon={faPlus} className=\"control-icon\" />\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ValueToggleButton;\r\n","import React, { Component } from 'react';\r\nimport Env from '../../three/Env.js';\r\nimport Play from '../Play.js';\r\nimport Next from '../Next.js';\r\nimport Prev from '../Prev.js';\r\nimport Genocide from '../Genocide.js';\r\nimport Populate from '../Populate.js';\r\nimport CameraRot from '../CameraRot.js';\r\nimport ValueToggleButton from '../ValueToggleButton.js';\r\nimport Labels from '../Labels.js';\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faPlay, faForward, faBackward, faVolumeUp, faVolumeDown, faPause } from '@fortawesome/free-solid-svg-icons';\r\nimport './GamePage.css';\r\n\r\nclass GamePage extends Component {\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n        healpixProps: {\r\n            radius: 2,\r\n            detail: 6\r\n        },\r\n        isPlay: false,\r\n        isNext: false,\r\n        isPrev: false,\r\n        isGenocide: false,\r\n        isPopulate: false,\r\n        isLabeled: false,\r\n        isCameraRot: false,\r\n        };\r\n    }\r\n    \r\n    \r\n  handleDetailChange = (newDetail) => {\r\n    console.log(\" healpixProps.detail :\", newDetail);\r\n    this.setState(prevState => ({\r\n      healpixProps: {\r\n        ...prevState.healpixProps,\r\n        detail: newDetail,\r\n      },\r\n    }));\r\n  }\r\n\r\n  isPlayChange = (newValue) => {\r\n    console.log(\" isPlay :\", newValue);\r\n    this.setState(prevState => ({\r\n        ...prevState.isPlay,\r\n        isPlay: newValue,\r\n    }));\r\n  }\r\n\r\n  isNextChange = () => {\r\n    //    Next\r\n    this.setState(prevState => ({\r\n        ...prevState.isNext,\r\n        isNext: true,\r\n    }));\r\n\r\n    console.log('isNextChange: ', this.state.isNext);\r\n    //     isNext  false\r\n    //  ,   Env   true\r\n    setTimeout(() => {\r\n      this.setState({ isNext: false });\r\n    }, 0); //   0  ,          \r\n\r\n  }\r\n\r\n  isPrevChange = () => {\r\n    //    Prev\r\n    this.setState(prevState => ({\r\n        ...prevState.isPrev,\r\n        isPrev: true,\r\n    }));\r\n    console.log('isPrevChange: ', this.state.isPrev);\r\n    //     isPrev  false\r\n    //  ,   Env   true\r\n    setTimeout(() => {\r\n      this.setState({ isPrev: false });\r\n    }, 0); //   0  ,          \r\n\r\n  }\r\n\r\n  isGenocideChange = () => {\r\n    //    \r\n    this.setState(prevState => ({\r\n        ...prevState.isGenocide,\r\n        isGenocide: true,\r\n    }));\r\n    console.log('isGenocideChange: ', this.state.isGenocide);\r\n    //     isGenocide  false\r\n    //  ,   Env   true\r\n    setTimeout(() => {\r\n      this.setState({ isGenocide: false });\r\n    }, 0); //   0  ,          \r\n  \r\n  }\r\n\r\n  isCameraRotChange = () => {\r\n    //     \r\n    this.setState(prevState => ({\r\n        ...prevState.isCameraRot,\r\n        isCameraRot: true,\r\n    }));\r\n    console.log('isCameraRotChange: ', this.state.isCameraRot);\r\n    //     isCamearaRot  false\r\n    //  ,   Env   true\r\n    setTimeout(() => {\r\n      this.setState({ isCameraRot: false });\r\n    }, 0); //   0  ,          \r\n\r\n  }\r\n\r\n  isPopulateChange = () => {\r\n    //    \r\n    this.setState(prevState => ({\r\n        ...prevState.isPopulate,\r\n        isPopulate: true,\r\n    }));\r\n    console.log('isPopulateChange: ', this.state.isPopulate);\r\n    //     isPopulate  false\r\n    //  ,   Env   true\r\n    setTimeout(() => {\r\n      this.setState({ isPopulate: false });\r\n    }, 0); //   0  ,          \r\n  \r\n  }\r\n\r\n  isLabeledChange = (newValue) => {\r\n    console.log(\" isLabeled :\", newValue);\r\n    this.setState(prevState => ({\r\n        ...prevState.isLabeled,\r\n        isLabeled: newValue,\r\n    }));\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"bg-gray-200 min-h-screen relative\">\r\n        <Env\r\n          healpixProps={this.state.healpixProps}\r\n          isPlay={this.state.isPlay}\r\n          isNext={this.state.isNext}\r\n          isPrev={this.state.isPrev}\r\n          isGenocide={this.state.isGenocide}\r\n          isCameraRot={this.state.isCameraRot}\r\n          isPopulate={this.state.isPopulate}\r\n          isLabeled={this.state.isLabeled}\r\n        />\r\n        <div className=\"controls-container\">\r\n          {/*   ValueToggleButton    */}\r\n          <div className=\"value-toggle-container\">\r\n            <ValueToggleButton\r\n              initialValue={this.state.healpixProps.detail}\r\n              minValue={0}\r\n              maxValue={55}\r\n              step={1}\r\n              onValueChange={this.handleDetailChange}\r\n            />\r\n          <div className=\"value-toggle-label\">Repeat</div>\r\n          </div>\r\n          <Prev \r\n            isPrevChange={this.isPrevChange}\r\n            isPrevInit={this.state.isPrev}\r\n          />\r\n          <Play \r\n            isPlayChange={this.isPlayChange}\r\n            isPlayInit={this.state.isPlay} \r\n          />\r\n          <Next \r\n            isNextChange={this.isNextChange}\r\n            isNextInit={this.state.isNext} \r\n          />\r\n          <Genocide \r\n            isGenocideChange={this.isGenocideChange}\r\n          />\r\n          <Populate \r\n            isPopulateChange={this.isPopulateChange}\r\n          />\r\n          <CameraRot \r\n            isCameraRotChange={this.isCameraRotChange}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default GamePage;\r\n//   render() {\r\n//     return (\r\n//         <div className=\"bg-gray-200 min-h-screen relative\">\r\n//             <div className=\"flex-grow relative z-2\">\r\n//                 <Env\r\n//                     healpixProps={this.state.healpixProps}\r\n//                     isPlay={this.state.isPlay}\r\n//                     isNext={this.state.isNext}\r\n//                     isPrev={this.state.isPrev}\r\n//                     isGenocide={this.state.isGenocide}\r\n//                     isCameraRot={this.state.isCameraRot}\r\n//                     isPopulate={this.state.isPopulate}\r\n//                     isLabeled={this.state.isLabeled}\r\n//                 />\r\n//             </div>\r\n//             {/*    */}\r\n//             <div className=\"absolute top-0 left-0 w-full h-full z-1\">\r\n//                     <Prev\r\n//                         isPrevChange={this.isPrevChange}\r\n//                         isPrevInit={this.state.isPrev}\r\n//                         className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                     />\r\n//                     <Play\r\n//                         isPlayChange={this.isPlayChange}\r\n//                         isPlayInit={this.state.isPlay}\r\n//                         className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                     />\r\n//                     <Next \r\n//                         isNextChange={this.isNextChange}\r\n//                         isNextInit={this.state.isNext} \r\n//                         className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                     />\r\n//                     <Genocide\r\n//                         isGenocideChange={this.isGenocideChange}\r\n//                         className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                     />\r\n//                     <Populate\r\n//                         isPopulateChange={this.isPopulateChange}\r\n//                         className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                     />\r\n//                     <ValueToggleButton\r\n//                         initialValue={this.state.healpixProps.detail}\r\n//                         minValue={0}\r\n//                         maxValue={55}\r\n//                         step={1}\r\n//                         onValueChange={this.handleDetailChange}\r\n//                         className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                     />\r\n//                 <CameraRot\r\n//                     isCameraRotChange={this.isCameraRotChange}\r\n//                     className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\r\n//                 />\r\n//                 {/*  ,   */}\r\n//             </div>\r\n//         </div>\r\n//     );\r\n// }\r\n// }\r\n\r\n// export default GamePage;"],"names":["_changeEvent","type","_startEvent","_endEvent","OrbitControls","THREE","constructor","object","domElement","super","undefined","console","warn","document","error","this","style","touchAction","enabled","target","minDistance","maxDistance","Infinity","minZoom","maxZoom","minPolarAngle","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","keys","LEFT","UP","RIGHT","BOTTOM","mouseButtons","ROTATE","MIDDLE","DOLLY","PAN","touches","ONE","TWO","DOLLY_PAN","target0","clone","position0","position","zoom0","zoom","_domElementKeyEvents","getPolarAngle","spherical","phi","getAzimuthalAngle","theta","getDistance","distanceTo","listenToKeyEvents","addEventListener","onKeyDown","saveState","scope","copy","reset","updateProjectionMatrix","dispatchEvent","update","state","STATE","NONE","offset","quat","setFromUnitVectors","up","quatInverse","invert","lastPosition","lastQuaternion","twoPI","sub","applyQuaternion","setFromVector3","rotateLeft","sphericalDelta","min","max","isFinite","makeSafe","radius","scale","addScaledVector","panOffset","add","setFromSpherical","lookAt","multiplyScalar","set","zoomChanged","distanceToSquared","EPS","dot","quaternion","dispose","removeEventListener","onContextMenu","onPointerDown","onPointerCancel","onMouseWheel","onPointerMove","onPointerUp","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","pointers","pointerPositions","getZoomScale","pow","angle","rotateUp","panLeft","v","distance","objectMatrix","setFromMatrixColumn","panUp","crossVectors","pan","deltaX","deltaY","element","isPerspectiveCamera","targetDistance","length","tan","fov","clientHeight","matrix","isOrthographicCamera","right","left","clientWidth","top","bottom","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","event","clientX","clientY","handleMouseDownPan","handleTouchStartRotate","pageX","pageY","x","y","handleTouchStartPan","handleTouchStartDolly","dx","dy","sqrt","handleTouchMoveRotate","getSecondPointerPosition","subVectors","handleTouchMovePan","handleTouchMoveDolly","setPointerCapture","pointerId","push","addPointer","pointerType","trackPointer","DOLLY_ROTATE","onTouchStart","mouseAction","button","handleMouseDownDolly","ctrlKey","metaKey","shiftKey","onMouseDown","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","onTouchMove","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","onMouseMove","removePointer","releasePointerCapture","preventDefault","handleMouseWheel","needsUpdate","code","handleKeyDown","i","splice","pointer","passive","Point","Hex","q","r","s","round","b","subtract","k","rotateRight","direction","directions","neighbor","diagonalNeighbor","diagonals","len","abs","qi","ri","si","q_diff","r_diff","s_diff","lerp","t","linedraw","N","a_nudge","b_nudge","results","step","OffsetCoord","col","row","qoffsetFromCube","h","EVEN","ODD","qoffsetToCube","roffsetFromCube","roffsetToCube","DoubledCoord","qdoubledFromCube","qdoubledToCube","rdoubledFromCube","rdoubledToCube","Orientation","f0","f1","f2","f3","b0","b1","b2","b3","start_angle","Layout","orientation","size","origin","hexToPixel","M","pixelToHex","p","pt","hexCornerOffset","corner","cos","sin","polygonCorners","corners","center","pointy","flat","Tests","equalHex","name","a","complain","equalOffsetcoord","equalDoubledcoord","equalInt","equalHexArray","testHexArithmetic","testHexDirection","testHexNeighbor","testHexDiagonal","testHexDistance","testHexRotateRight","testHexRotateLeft","testHexRound","c","testHexLinedraw","testLayout","testOffsetRoundtrip","testOffsetFromCube","testOffsetToCube","testDoubledRoundtrip","testDoubledFromCube","testDoubledToCube","testAll","log","GOL","React","props","Cube","z","flat_hex_corner","angle_deg","angle_rad","hexSize","pointy_hex_corner","drawHex","cellPoints","start","hexOrigin","hexRound","cubeDir","dir","cubeAdd","cubeNeighbor","cubeToAxial","axialToCube","cube_to_oddr","oddr_to_cube","cube_to_oddq","oddq_to_cube","cubeRound","rx","ry","rz","x_diff","y_diff","z_diff","findNeighbors","neigbors","cube","coordinates","cubeDistance","lerpCube","drawLineCube","getHexParameters","hexHeight","hexWidth","vertDist","horizDist","findActiveNeighbors","filter","neighborCube","neighborCell","cellsMap","find","cell","generateGradientMaterials","startColor","endColor","numberOfMaterials","materials","ratio","color","updateLabelsToFaceUp","labels","forEach","label","createTextSprite","message","fontSize","arguments","canvas","createElement","context","getContext","width","height","fillStyle","font","concat","textAlign","textBaseline","clearRect","fillText","texture","material","map","sprite","positionLabel","axis","offsetAngle","setHex","addLabelsToHexagons","gridGroup","children","qLabel","rLabel","sLabel","labelsArray","scene","removeLabelsFromHexagons","remove","handleWorkerMessage","e","newCellsMap","data","setState","createInitialGrid","hexGeometry","createHexagonShape","gridRadius","HexShapeCountRound","hexToPosition","random","lifeTime","stateUpdated","roundCoordinates","hexMesh","hexMaterialActive","hexMaterialInactive","handleRing","reinitializeGrid","addRing","oldGridRadius","newGridRadius","existingHexagon","saveCurrentState","currentState","cellState","meshName","savedState","loadSavedState","savedCell","hexMaterial","updateScene","renderer","camera","render","handleGenocide","newStates","Map","nextState","get","handlePopulate","startUpdateCycle","interval","setInterval","updateFieldState","stopUpdateCycle","clearInterval","steps","activeNeighbors","currentlyActive","history","slice","prevState","pop","rotateCameraAndZoomToFit","degToRad","applyAxisAngle","boundingBox","setFromObject","getSize","zoomLevel","window","innerWidth","innerHeight","orbitControls","isCameraRotTriggered","frameId","requestAnimationFrame","animate","stop","cancelAnimationFrame","delta","clock","getDelta","timer","Date","now","renderScene","pasteState","keyup","key","handleMouseDown","isDrawing","toggleHexState","handleLongTouch","handleTouchEnd","handleMouseMove","handleMouseUp","rect","getBoundingClientRect","mouse","raycaster","setFromCamera","intersects","intersectObjects","newState","index","findIndex","DefaultUp","container","scrollWidth","layers","enable","updateMatrix","alpha","antialias","controls","delay","active","isLabeled","isLabeledTriggered","isPlay","isGenocide","isGenocideTriggered","isCameraRot","isPopulate","isPopulateTriggered","currentPopulation","previousPopulation","hexSize2D","healpixProps","detail","cd","updateScreenSize","bind","labelsVisible","mixers","background","fog","hemiLight","setHSL","groundColor","dirLight","castShadow","shadow","mapSize","shadowDistance","far","bias","vertexShader","getElementById","textContent","fragmentShader","uniforms","topColor","value","bottomColor","exponent","skyGeo","rotateX","skyMat","side","sky","componentDidMount","setPixelRatio","devicePixelRatio","gammaInput","gammaOutput","shadowMap","appendChild","gradientMaterials","hexMaterialActive2","hexMaterialActive3","hexMaterialActive1","hexMaterialActive4","hexMaterialHighlight","initialGrid","componentDidUpdate","prevProps","worker","terminate","isNext","isPrev","componentWillUnmount","removeChild","shape","moveTo","lineTo","closePath","up_w","up_h","aspect","setSize","_jsx","W","ref","thisNode","onKeyUp","Env","Component","socket","handleClick","userPos","lastPose","endpoint","username","password","token","rnd","colors","signup","JSON","stringify","send","login","handleServerMessages","parse","status","WebSocket","onopen","onmessage","onclose","onerror","close","getRandomInt","newColor","cc","className","usercolor","Play","isPlayClick","newValue","isPlayChange","isPlayInit","playStyle","onClick","FontAwesomeIcon","icon","faPause","faPlay","Next","handleNextClick","isNextChange","faStepForward","Prev","handlePrevClick","isPrevChange","faStepBackward","Genocide","handleGenocideClick","isGenocideChange","faGhost","Populate","handlePopulateClick","isPopulateChange","faDice","CameraRot","handleCameraRotClick","isCameraRotChange","faCamera","ValueToggleButton","handleIncreaseClick","maxValue","onValueChange","handleDecreaseClick","minValue","initialValue","_jsxs","faMinus","faPlus","GamePage","handleDetailChange","newDetail","setTimeout","isLabeledChange","isPrevInit","isNextInit"],"sourceRoot":""}